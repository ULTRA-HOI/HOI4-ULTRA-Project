#Category only allowed for GER
GER_mefo_bills_category = {

	GER_mefo_bills_mission = {

		priority = 2
		allowed = { always = no }

		icon = ger_mefo_bills

		available = {
			NOT = { has_government = democratic }
			GER_can_delay_mefo_payment = yes
			has_political_power > 0
			hidden_trigger = { always = no }
		}

		days_mission_timeout = 180
		is_good = yes
		fire_only_once = yes

		cancel_trigger = {
			hidden_trigger = {
				OR = {
					NOT = { GER_has_mefo_bills = yes }
					has_idea = GER_mefo_bills_ended
				}
			}
		}

		timeout_effect = {
			if = {
				limit = {
					has_country_flag = ger_has_cancelled_mefo
				}
				GER_remove_mefo_bills = yes
				GER_mefo_bills_cancel_effect = yes
			}
			else = {
				custom_effect_tooltip = GER_mefo_bills_mission_tt
				custom_effect_tooltip = GER_mefo_bills_effect_in_days
				add_to_variable = { var = GER_mefo_bills_PP_cost value = 0.15 }
				custom_effect_tooltip = GER_mefo_bills_level_up_tt
				hidden_effect = {
					activate_mission = GER_mefo_bills_mission
				}
			}
		}

		ai_will_do = {
			factor = 200
		}
	}

	GER_cancel_mefos = {

		icon = ger_mefo_bills

		available = {
			hidden_trigger = {
				NOT = { has_country_flag = ger_has_cancelled_mefo }
				NOT = {
					OR = {
						NOT = { GER_has_mefo_bills = yes }
						has_idea = GER_mefo_bills_ended
					}
				}
			}
		}

		cost = 0

		fire_only_once = no

		visible = {
			hidden_trigger = {
				NOT = { has_country_flag = ger_has_cancelled_mefo }
				NOT = {
					OR = {
						NOT = { GER_has_mefo_bills = yes }
						has_idea = GER_mefo_bills_ended
					}
				}
			}
		}

		cancel_if_not_visible = yes

		remove_effect = {
			set_country_flag = ger_has_cancelled_mefo
		}

		ai_will_do = {
			factor = 0
		}
	}

	GER_renew_mefos = {

		icon = ger_mefo_bills

		available = {
			hidden_trigger = {
				has_country_flag = ger_has_cancelled_mefo
				NOT = {
					OR = {
						NOT = { GER_has_mefo_bills = yes }
						has_idea = GER_mefo_bills_ended
					}
				}
			}
		}

		cost = 0

		fire_only_once = no

		visible = {
			hidden_trigger = {
				has_country_flag = ger_has_cancelled_mefo
				NOT = {
					OR = {
						NOT = { GER_has_mefo_bills = yes }
						has_idea = GER_mefo_bills_ended
					}
				}
			}
		}

		cancel_if_not_visible = yes

		remove_effect = {
			clr_country_flag = ger_has_cancelled_mefo
		}

		ai_will_do = {
			factor = 200
		}
	}
	
	GER_autarky_mission = {
		priority = 4
		icon = ger_mefo_bills

		available = {
			NOT = {
				NOT = { has_government = democratic }
				GER_can_endure_autarky = yes
			}
		}

		days_mission_timeout = 180
		is_good = yes
		fire_only_once = yes
		activation = {
			GER_has_economy_fatigue = yes
		}
		cancel_trigger = {

			hidden_trigger = {
				OR = {
					has_idea = GER_economic_crash
					NOT = {GER_has_economy_fatigue = yes}
				}
			}
		}
		timeout_effect = {
			GER_autarky_level_up = yes

			hidden_effect = {
				activate_mission = GER_autarky_mission
			}
			IF = {
				limit = {
					NOT = { GER_can_endure_autarky = yes }
				}

				GER_remove_autarky = yes

				#make penalties harsher than when manually cancelling
				multiply_variable  = { var = GER_autarky_PP_hit value = 1.5 }

				GER_autarky_crash_effect = yes
				
				add_war_support = -0.5
				add_popularity = {
					ideology = fascism
					popularity = -0.5
				}
				swap_ideas = {
					remove_idea = autarki_economy
					add_idea = corporatist_economy
				}
				add_ideas = civilian_economy
			}
		}

		ai_will_do = {
			factor = 200
		}
	}
	
	GER_end_autarky = {
		priority = 3
		available = {
			NOT = { has_government = democratic }
			GER_can_endure_autarky = yes
			GER_has_economy_fatigue = yes
		}
		visible = {
			GER_has_economy_fatigue = yes
			has_war = no
		}

		cost = 100
		
		complete_effect = {
			GER_remove_autarky = yes
			swap_ideas = {
				remove_idea = autarki_economy
				add_idea = mixed_economy
			}
			GER_autarky_crash_effect = yes
		}

		ai_will_do = {
			factor = 0
		}
	}
	
	GER_use_polish_wealth = {
		
		cancel_trigger = {

			hidden_trigger = {
				OR = {
					NOT = { GER_has_economy_fatigue = yes }
					has_idea = GER_economic_crash
				}
			}
		}
		
		visible = {
			GER_has_economy_fatigue_2 = yes
			OR = {
				has_war_with = POL
				POL = {
					is_subject_of = GER
				}
				owns_state = 10
			}
		}
		
		available = {
			OR = {
				POL = {
					has_capitulated = yes
				}
				POL = {
					is_subject_of = GER
				}
				owns_state = 10
			}
		}
		
		ai_will_do = {
			factor = 1000
		}
		
		fire_only_once = yes
		cost = 0
		days_remove = 30
		
		complete_effect = {
			
		}
		
		remove_effect = {
			custom_effect_tooltip = occupation_of_poland_economy_fatigue_tt
			GER_autarky_level_down = yes
		}
	}
	
	
	GER_use_french_wealth = {
		cancel_trigger = {

			hidden_trigger = {
				OR = {
					NOT = { GER_has_economy_fatigue = yes }
					has_idea = GER_economic_crash
				}
			}
		}
		
		visible = {
			GER_has_economy_fatigue_4 = yes
			OR = {
				has_war_with = FRA
				FRA = {
					is_subject_of = GER
				}
				
				owns_state = 16
			}
		}
		
		available = {
			OR = {
				FRA = {
					has_capitulated = yes
				}
				FRA = {
					is_subject_of = GER
				}
				
				owns_state = 16
			}
		}
		
		ai_will_do = {
			factor = 1000
		}
		
		fire_only_once = yes
		cost = 0
		days_remove = 90
		
		complete_effect = {
			
		}
		
		remove_effect = {
			IF = {
				limit = {
					is_ai = yes
				}
				GER_remove_autarky = yes
			}
			custom_effect_tooltip = occupation_of_france_economy_fatigue_tt
			GER_autarky_level_down_3 = yes
		}
	}
	
	GER_use_ukrainian_wealth = {
		cancel_trigger = {

			hidden_trigger = {
				OR = {
					NOT = { GER_has_economy_fatigue = yes }
					has_idea = GER_economic_crash
				}
			}
		}
		
		visible = {
			GER_has_economy_fatigue_3 = yes
			OR = {
				has_war_with = SOV
				UKR = {
					is_subject_of = GER
				}
				SOV = {
					is_subject_of = GER
				}
				owns_state = 202
			}
		}
		
		available = {
			OR = {
				
				UKR = {
					is_subject_of = GER
				}
				SOV = {
					is_subject_of = GER
				}
				AND = {
					controls_state = 202 #Kiev
					controls_state = 221 #Karkov
					controls_state = 226 #Krivoi Rog
				}
			}
		}
		
		ai_will_do = {
			factor = 1000
		}
		
		fire_only_once = yes
		cost = 25
		days_remove = 60
		
		complete_effect = {
			
		}
		
		remove_effect = {
			IF = {
				limit = {
					is_ai = yes
				}
				GER_remove_autarky = yes
			}
			custom_effect_tooltip = occupation_of_ukraine_economy_fatigue_tt
			GER_autarky_level_down_2 = yes
		}
	}
	
	GER_use_russian_wealth = {
		cancel_trigger = {

			hidden_trigger = {
				OR = {
					NOT = { GER_has_economy_fatigue = yes }
					has_idea = GER_economic_crash
				}
			}
		}
		
		visible = {
			GER_has_economy_fatigue = yes
			OR = {
				has_war_with = SOV
				SOV = {
					is_subject_of = GER
				}
				owns_state = 219
			}
		}
		
		available = {
			OR = {
				SOV = {
					is_subject_of = GER
				}
				RUS = {
					is_subject_of = GER
				}
				AND = {
					controls_state = 219 #Moscow
					controls_state = 195 #Leningrad
					controls_state = 217 #Stalingrad
				}
			}
		}
		
		ai_will_do = {
			factor = 1000
		}
		
		fire_only_once = yes
		cost = 0
		days_remove = 180
		
		complete_effect = {
			
		}
		
		remove_effect = {
			custom_effect_tooltip = occupation_of_russia_economy_fatigue_tt
			GER_remove_autarky = yes
		}
	}
	
	GER_use_benelux_wealth = {
		cancel_trigger = {

			hidden_trigger = {
				OR = {
					NOT = { GER_has_economy_fatigue = yes }
					has_idea = GER_economic_crash
				}
			}
		}
		
		visible = {
			GER_has_economy_fatigue = yes
			GER_has_economy_fatigue_2 = yes
			OR = {
				AND = {
					has_war_with = BEL
					has_war_with = HOL
				}
				AND = {
					BEL = {
						is_subject_of = GER
					}
					HOL = {
						is_subject_of = GER
					}
				}
				AND = {
					owns_state = 6
					owns_state = 7
				}
			}
		}
		
		available = {
			OR = {
				AND = {
					BEL = {
						is_subject_of = GER
					}
					HOL = {
						is_subject_of = GER
					}
				}
				AND = {
					controls_state = 6 #Brussel
					controls_state = 7 #Amsterdam
				}
			}
		}
		
		ai_will_do = {
			factor = 1000
		}
		
		fire_only_once = yes
		cost = 0
		days_remove = 30
		
		complete_effect = {
			
		}
		
		remove_effect = {
			custom_effect_tooltip = occupation_of_benelux_economy_fatigue_tt
			GER_autarky_level_down = yes
		}
	}
	
	GER_use_balkans_wealth = {
		cancel_trigger = {

			hidden_trigger = {
				OR = {
					NOT = { GER_has_economy_fatigue = yes }
					has_idea = GER_economic_crash
				}
			}
		}
		
		visible = {
			GER_has_economy_fatigue_2 = yes
			OR = {
				AND = {
					has_war_with = YUG
					has_war_with = GRE
				}
				AND = {
					YUG = {
						is_subject_of = GER
					}
					GRE = {
						is_subject_of = GER
					}
				}
				AND = {
					owns_state = 47
					owns_state = 107
				}
			}
		}
		
		available = {
			OR = {
				AND = {
					YUG = {
						is_subject_of = GER
					}
					GRE = {
						is_subject_of = GER
					}
				}
				AND = {
					YUG = {
						has_capitulated = yes
					}
					GRE = {
						has_capitulated = yes
					}
				}
			}
		}
		
		ai_will_do = {
			factor = 1000
		}
		
		fire_only_once = yes
		cost = 0
		days_remove = 30
		
		complete_effect = {
			
		}
		
		remove_effect = {
			custom_effect_tooltip = occupation_of_balkans_economy_fatigue_tt
			GER_autarky_level_down = yes
		}
	}
	
	GER_capture_NOR_gold = {
		cancel_trigger = {
			hidden_trigger = {
				OR = {
					NOT = { GER_has_economy_fatigue = yes }
					has_idea = GER_economic_crash
				}
			}
		}
		
		visible = {
			GER_has_economy_fatigue_2 = yes
			OR = {
				has_war_with = NOR
				has_wargoal_against = NOR
			}
		}

		fire_only_once = yes
		days_mission_timeout = 20
		is_good = no
		activation = {
			has_war_with = NOR
		}
		
		available = {
			controls_province = 6115 #Oslo
			controls_province = 53 # Stavanger
			controls_province = 122 # Bergen
			controls_province = 3022 # Trondheim
			controls_province = 9296 # Kristiansand
		}
		
		complete_effect = {
			custom_effect_tooltip = norwegian_gold_economy_fatigue_tt
			GER_autarky_level_down = yes
		}
		
	}
	
}

operations = {
	Fall_Weiss = {
		icon = generic_operation
		
		highlight_states = {
			highlight_state_targets = {	
				state = 188
				state = 85
				state = 817
				state = 86
				state = 762	
			}
		}
		
		visible = {
			original_tag = GER
			date > 1939.1.1
		}
		
		available = {
			has_completed_focus = GER_weiss
			has_completed_focus = GER_danzig_or_war
			817 = {
				is_core_of = GER
			}
			NOT = { owns_state = 817 }
			is_puppet = no
			IF = {
				limit = {
					is_ai = yes
				}
				date > 1939.8.31
			}
		}
		
		cost = 0
		
		fire_only_once = yes
		
		ai_will_do = {
			factor = 200
			modifier = {
				factor = 0
				date < 1939.9.1
			}
		}
		
		complete_effect = {
			declare_war_on = {
				target = POL 
				type = annex_everything 
			}
			IF = {
				limit = {
					POL = {
						is_guaranteed_by = ENG
					}
				}
				declare_war_on = {
					target = ENG 
					type = annex_everything 
				}
			}
			IF = {
				limit = {
					POL = {
						is_guaranteed_by = FRA
					}
				}
				declare_war_on = {
					target = FRA
					type = annex_everything 
				}
			}
			add_timed_idea = {
				idea = blitzkrieg_idea
				days = 21
			}
			add_war_support = 0.03
			hidden_effect = {
				IF = {
					limit = {
						ITA = { is_in_faction = no }
					}
					ITA = { create_faction = Italia }
				}
			}
			
		}
	}

	GER_barbarossa_mission = {

		icon = generic_operation

		allowed = {
			always = no
			#added through on_action
		}

		available = {
			219 = { is_controlled_by_ROOT_or_ally = yes }
			195 = { is_controlled_by_ROOT_or_ally = yes }
			202 = { is_controlled_by_ROOT_or_ally = yes }
			217 = { is_controlled_by_ROOT_or_ally = yes }
		}

		days_mission_timeout = 130
		fire_only_once = yes

		activation = {

		}

		is_good = no

		complete_effect = {
			add_war_support = 0.1
			custom_effect_tooltip = barbarossa_mission_tt
		}

		timeout_effect = {

		}

		ai_will_do = {
			factor = 1
		}
	}
	
	
	
	GER_fall_gelb = {
	
		icon = generic_operation
		
		allowed = {
			original_tag = GER
		}
		
		visible = {
			
			#has_war_with = FRA
			has_completed_focus = GER_around_maginot
			FRA = {
				exists = yes
				#has_capitulated = no 
			}
		}
		
		fire_only_once = yes
		
		ai_will_do = {
			factor = 100
		}
		
		available = {
			
			has_completed_focus = GER_around_maginot
			NOT = {
				has_idea = blitzkrieg_idea
			}
			IF = {
				limit = {
					is_ai = yes
				}
				OR = {
					AND = {
						date > 1939.5.8
						date < 1939.11.1
					}			
					AND = {
						date > 1940.5.8
						date < 1940.11.1
					}
					AND = {
						date > 1941.5.8
						date < 1941.11.1
					}			
					AND = {
						date > 1942.5.8
						date < 1942.11.1
					}			
					AND = {
						date > 1943.5.8
						date < 1943.11.1
					}			
					AND = {
						date > 1944.5.8
						date < 1944.11.1
					}			
					AND = {
						date > 1945.5.8
						date < 1945.11.1
					}
				}
			}
		}
		
		complete_effect = {
			if = { 
				limit = {
					country_exists = BEL
					NOT = { BEL = { is_in_faction_with = GER } }
					NOT = { has_war_with = BEL }
				}
				declare_war_on = {
					target = BEL
					type = annex_everything
				}
			}
			if =  {
				limit = {
					country_exists = HOL
					NOT = { HOL = { is_in_faction_with = GER } }
					NOT = { has_war_with = HOL }
				}
				declare_war_on = {
					target = HOL
					type = annex_everything
				}
			}
			if = {
				limit = {
					country_exists = LUX
					NOT = { LUX = { is_in_faction_with = GER } }
					NOT = { has_war_with = LUX }
					is_ai = no
				}
				declare_war_on = {
					target = LUX
					type = annex_everything
				}		
			}
			add_timed_idea = {
				idea = blitzkrieg_idea
				days = 30
			}
			IF = {
				limit = {
					FRA = {
						has_idea = FRA_victors_of_wwi
					}
				}
				FRA = {
					country_event = {
						id = france.264
						days = 1
					}
				}
			}
			IF = {
				limit = {
					GER = {
						is_ai = yes
					}
				}
				GER = {
					add_timed_idea = {
						idea = GER_AI_gelb
						days = 90
					}
				}
			}
			effect_tooltip = {
				IF = {
					limit = {
						is_ai = no
					}
					FRA = {
						IF = {
							limit = {
								has_idea = FRA_victors_of_wwi
							}
							add_timed_idea = {
								idea = FRA_disorganized_army
								days = 21
							}
						}
					}
				}
			}
			
			
		}
		
	}
	
	scapa_flow_raid = {

		icon = generic_naval
	
		allowed = {
			tag = ger
		}
		
		available = {
			has_navy_size = {
				unit = submarine
				size > 55
			}
			has_war_with = ENG
			IF = {
				limit = {is_ai = no}
				command_power > 50
				date < 1940.1.1
			}
			IF = {
				limit = {is_ai = yes}
				date > 1939.10.13
			}		
		}

		cost = 50

		fire_only_once = yes

		ai_will_do = {
			factor = 100
		}
		
		visible = {
			tag = GER
			has_war_with = ENG
		}
		
		complete_effect = {
			GER = {
				country_event = { id = Germany.300 hours = 5 }
			}
			set_country_flag = scapa
			add_command_power = -50
		}
	}

	GER_operation_Barbarossa = {
	
		icon = generic_operation
		
		allowed = {
			original_tag = GER
		}
			
		visible = {
			
			SOV = {
				exists = yes
				has_capitulated = no 
			}
			#is_ai = yes
			OR = {
				has_completed_focus = GER_ussr_war_goal
				has_completed_focus = GER_strike_at_the_source
			}
		}
			
		fire_only_once = yes
			
		ai_will_do = {
			factor = 999
		}			
		available = {
			
			OR = {
				NOT = {
					has_war_with = FRA
				}
				FRA = {
					exists = no
				}
				FRA = {
					has_capitulated = yes 
				}
			}
			NOT = {
				has_idea = blitzkrieg_idea
			}
			OR = {
				has_completed_focus = GER_ussr_war_goal
				has_completed_focus = GER_tackle_the_communist_threat
				has_completed_focus = GER_strike_at_the_source
			}
			IF = {
				limit = {
					is_ai = yes
				}
				OR = {
					AND = {
						date > 1940.6.15
						date < 1940.8.1
					}
					AND = {
						date > 1941.6.15
						date < 1941.8.1
					}			
					AND = {
						date > 1942.6.15
						date < 1942.8.1
					}			
					AND = {
						date > 1943.6.15
						date < 1943.8.1
					}			
					AND = {
						date > 1944.6.15
						date < 1944.8.1
					}			
					AND = {
						date > 1945.6.15
						date < 1945.8.1
					}
				}
			}
			
			OR = {
				NOT = {
					has_war_with = FRA
				}
				FRA = {
					exists = no
				}
				FRA = {
					has_capitulated = yes 
				}
			}
		}
			
		complete_effect = {
			declare_war_on = {
				target = SOV
				type = annex_everything
			}
			IF = {
				limit = {
					is_ai = yes
					SOV = {
						is_ai = no
					}
				}
				add_timed_idea = {
					idea = blitzkrieg_idea
					days = 15
				}
				add_timed_idea = {
					idea = GER_AI_barba
					days = 30
				}
				add_equipment_to_stockpile = {
					type = ger_medium_equipment_1
					amount = 2000
					producer = GER
				}
				add_equipment_to_stockpile = {
					type = motorized_equipment_1
					amount = 3000
					producer = GER
				}
				add_equipment_to_stockpile = {
					type = mechanized_equipment
					amount = 3000
					producer = GER
				}
				#add_equipment_to_stockpile = {
				#	type = infantry_equipment_1
				#	amount = 5000
				#	producer = GER
				#}
				#add_equipment_to_stockpile = {
				#	type = heavy_infantry_equipment_2
				#	amount = 2000
				#	producer = GER
				#}
				add_equipment_to_stockpile = {
					type = support_equipment_1
					amount = 2000
					producer = GER
				}
				add_equipment_to_stockpile = {
					type = anti_tank_equipment_1
					amount = 3000
					producer = GER
				}
				add_equipment_to_stockpile = {
					type = artillery_equipment_1
					amount = 3000
					producer = GER
				}
				add_equipment_to_stockpile = {
					type = anti_air_equipment_1
					amount = 3000
					producer = GER
				}
				add_equipment_to_stockpile = {
					type = heavy_anti_air_equipment_1
					amount = 500
					producer = GER
				}
			}
			IF = {
				limit = {
					ROM = {
						is_in_faction_with = GER
						is_ai = yes
					}
				}
				ROM = {
					declare_war_on = {
						target = SOV
						type = annex_everything
					}
				}
			}
			IF = {
				limit = {
					HUN = {
						is_in_faction_with = GER
						is_ai = yes
					}
				}
				HUN = {
					declare_war_on = {
						target = SOV
						type = annex_everything
					}
				}
			}
			IF = {
				limit = {
					ITA = {
						is_in_faction_with = GER
					}
				}
				ITA = {
					declare_war_on = {
						target = SOV
						type = annex_everything
					}
				}
			}
		}
	
	
	}
		
	GER_fall_blau_operation = {
	
		icon = generic_operation
		
		allowed = {
			original_tag = GER
		}
			
		visible = {
			has_war_with = SOV
			has_completed_focus = GER_fall_blau
			NOT = {
				controls_state = 217 # Stalingrad
				controls_state = 229 # Baku
			}
		}
			
		fire_only_once = yes
			
		ai_will_do = {
			factor = 100
		}			
		available = {
			
			has_completed_focus = GER_fall_blau
			NOT = {
				has_idea = GER_barbarossa
			}
			any_country = {
				OR = {
					original_tag = GER
					is_in_faction_with = GER
				}
				OR = {
					controls_state = 206 #minsk
					controls_state = 202 #kiev
					controls_state = 1036 #riga
				}
			}
			IF = {
				limit = {
					is_ai = yes
				}
				OR = {								
					AND = {
						date > 1941.6.15
						date < 1941.7.15
					}			
					AND = {
						date > 1942.6.15
						date < 1942.7.15
					}			
					AND = {
						date > 1943.6.15
						date < 1943.7.15
					}			
					AND = {
						date > 1944.6.15
						date < 1944.7.15
					}			
					AND = {
						date > 1945.6.15
						date < 1945.7.15
					}
				}
			}
		}
			
		complete_effect = {
			add_timed_idea = {
				idea = GER_barbarossa
				days = 60
			}
			IF = {
				limit = {
					is_ai = yes
					SOV = {
						is_ai = no
					}
				}
				add_timed_idea = {
					idea = GER_AI_barba
					days = 30
				}
			}
			IF = {
				limit = {
					is_ai = yes
					SOV = {
						is_ai = no
					}
				}
				add_timed_idea = {
					idea = blitzkrieg_idea
					days = 90
				}
			}
			hidden_effect = {
				IF = {
					limit = {
						SOV = {is_ai = yes}
						is_ai = no
					}
					SOV = {
						remove_ideas = SOV_desperate_measures_ns
						complete_national_focus = SOV_lessons_of_war
						complete_national_focus = SOV_swap_to_political_advisors
					}
				}
			}
		}		
	}
	
	GER_wacht_am_rhein_mission = {
		icon = generic_operation
		
		allowed = {
			original_tag = GER
		}
			
		visible = {
			
			has_war_with = SOV
			has_war_with = USA
			has_war_with = ENG 
			has_war_with = FRA
			has_completed_focus = GER_wacht_am_rhein
		}
		
		fire_only_once = yes
			
		ai_will_do = {
			factor = 100
		}
		
		available = {
			
			has_completed_focus = GER_wacht_am_rhein
			NOT = {
				has_idea = blitzkrieg_idea
			}
			has_war_with = USA 
			has_war_with = ENG 
			has_war_with = FRA 
			any_country = {
				OR = {
					original_tag = GER
					is_in_faction_with = GER
				}
				NOT = {
					controls_state = 16 #Paris
					controls_state = 29 #Nord-pas-de-Calais
				}
			}
			controls_state = 51 #Rheinland
			has_tech = advanced_medium_tank
			has_tech = advanced_heavy_tank
			
			OR = {
				AND = {
					date > 1943.12.1
					date < 1944.2.1
				}
				AND = {
					date > 1944.12.1
					date < 1945.2.1
				}
				AND = {
					date > 1945.12.1
					date < 1946.2.1
				}
			}
			
		}
		
		complete_effect = {
			add_timed_idea = {
				idea = GER_winter_offensive
				days = 30
			}
		}	
	}
	
	
	
	GER_help_Iraq = {
		icon = generic_operation
		
		allowed = {
			original_tag = GER
		}
		
		visible = {
			IRQ = {
				has_war_with = ENG
				is_subject = no
			}
			
		}
		
		available = {
			
			has_war_with = ENG
			OR = {
				controls_state = 16 
				any_other_country = {
					original_tag = FRA 
					has_government = fascism
					OR = {
						is_subject_of = GER
						has_focus_tree = vichy_french_focus
					}
					controls_state = 16 
				}
			}
		}
		
		fire_only_once = yes
		
		ai_will_do = {
			factor = 100
		}
		
		complete_effect = {
			IF = {
				limit = {
					any_other_country = {
						original_tag = FRA 
						has_government = fascism
						OR = {
							is_subject_of = GER
							has_focus_tree = vichy_french_focus
						}
						controls_state = 554
					}
				}
				SYR = {
					transfer_state = 554
					transfer_state = 553
					transfer_state = 677
					transfer_state = 680
				}
			}
			GER = {
				puppet = IRQ
				puppet = SYR
				#puppet = LEB
				KUW = { remove_resource_rights = 291 }
				KUW = { remove_resource_rights = 676 }
			}
		}
	}
	
	GER_pressure_Persia = {
		allowed = {
			original_tag = GER
		}
		Visible = {
			is_in_faction_with = IRQ
		}
		available = {
			has_war_with = ENG
			ENG = {
				NOT = {
					controls_state = 816
				}
				NOT = {
					controls_state = 656
				}
			}
		}
		
		fire_only_once = yes
		
		ai_will_do = {
			factor = 100
		}
		
		complete_effect = {
			KUW = { remove_resource_rights = 413 }
			KUW = { remove_resource_rights = 412 }
			KUW = { remove_resource_rights = 411 }
		}
		
	}
}

GER_case_anton_category = {

	GER_case_anton = {

		icon = generic_operation

		available = {
			original_tag = GER
			has_war = yes
			has_government = fascism
			any_country_with_original_tag = {
				original_tag_to_check = FRA
				has_government = fascism
				OR = {
					is_subject_of = GER
					has_focus_tree = vichy_french_focus
				}
				NOT = { has_war_with = GER }
				NOT = { has_country_flag = case_anton }
				has_capitulated = no
				custom_trigger_tooltip = {
					tooltip = GER_case_anton_tt2
					count_triggers = {
						amount = 3 # lost control of ca half french north africa
						458 = { CONTROLLER = { has_war_with = ROOT } }
						459 = { CONTROLLER = { has_war_with = ROOT } }
						460 = { CONTROLLER = { has_war_with = ROOT } }
						461 = { CONTROLLER = { has_war_with = ROOT } }
						462 = { CONTROLLER = { has_war_with = ROOT } }
						513 = { CONTROLLER = { has_war_with = ROOT } }
						665 = { CONTROLLER = { has_war_with = ROOT } }
					}
				}
			}
			divisions_in_state = { state = 31 size < 1 }
			divisions_in_state = { state = 25 size < 1 }
			divisions_in_state = { state = 22 size < 1 }
			divisions_in_state = { state = 21 size < 1 }
			divisions_in_state = { state = 1081 size < 1 }
			divisions_in_state = { state = 32 size < 1 }
			divisions_in_state = { state = 22 size < 1 }
			divisions_in_state = { state = 26 size < 1 }
			divisions_in_state = { state = 33 size < 1 }
			divisions_in_state = { state = 20 size < 1 }
			OR = {
				ITA = { owns_state = 735 }
				divisions_in_state = { state = 735 size < 1 }
			}
			OR = {
				ITA = { owns_state = 798 }
				divisions_in_state = { state = 798 size < 1 }
			}
			OR = {
				ITA = { owns_state = 1031 }
				divisions_in_state = { state = 1031 size < 1 }
			}
		}

		cost = 50
		fire_only_once = yes

		visible = {
			original_tag = GER
			has_government = fascism
			any_country_with_original_tag = {
				original_tag_to_check = FRA
				has_government = fascism
				OR = {
					is_subject_of = GER
					has_focus_tree = vichy_french_focus
				}
				NOT = { has_war_with = GER }
			}
		}
		ai_will_do = {
			factor = 500

			modifier = {
				factor = 0
				VIC = { is_ai = no }
			}
		}
		complete_effect = {
			custom_effect_tooltip = GER_case_anton_tt
			hidden_effect = {
				random_other_country = {
					limit = {
						original_tag = FRA
						has_government = fascism
						OR = {
							is_subject_of = GER
							has_focus_tree = vichy_french_focus
						}
					}
					set_country_flag = case_anton
					activate_mission = FRA_case_anton_mission
				}
				GER = {
					puppet = VIC
				}
			}
		}
	}
}

political_actions = {
	
	GER_prepare_coup = {
		icon = generic_prepare_civil_war
		
		visible = {
			NOT = {
				has_completed_focus = GER_demand_sudetenland
			}
			has_completed_focus = GER_anschluss
			has_game_rule = { rule = IHMP_HISTORY option = ALLOWED }
		}
		
		available = {
			focus_progress = {
				focus = GER_demand_sudetenland
				progress > 0.1
			}
		}
		
		fire_only_once = yes
		
		ai_will_do = {
			factor = 1000
			modifier = {
				NOT = {
					has_game_rule = {
						rule = GER_ai_behavior
						option = DEMOCRATIC
					}
				}
				factor = 0
			}
		}
		
		complete_effect = {
			custom_effect_tooltip = GER_prepare_coup_tt
			hidden_effect = {
				set_global_flag = german_coup_preparation
			}
		}
	}

	# Reinstate Wilhelm IV into the line of succession
	reinstate_wilhelm_iv_succession_rights = {

		allowed = {
			original_tag = GER
		}

		available = {

		}

		cost = 100

		fire_only_once = yes

		ai_will_do = {
			factor = 0
		}

		visible = {
			has_war = no
			has_government = neutrality
			has_country_flag = backed_down_netherlands_kaiser
		}

		complete_effect = {
			add_stability = -0.10
			add_popularity = { ideology = neutrality popularity = -0.05 }
			custom_effect_tooltip = reinstate_wilhelm_iv_succession_rights_tt
			hidden_effect = {
				set_country_flag = reinstated_wilhelm_iv_succession_rights
			}
		}
	}

	# Agnatic-Cognatic Primogeniture
	modernize_the_succession_laws = {

		allowed = {
			original_tag = GER
		}

		available = {

		}

		cost = 150

		fire_only_once = yes

		ai_will_do = {
			factor = 0
		}

		visible = {
			has_war = no
			has_government = neutrality
			has_country_flag = reinstated_wilhelm_iv_succession_rights
		}

		complete_effect = {
			add_stability = 0.05
			custom_effect_tooltip = modernize_the_succession_laws_tt
			hidden_effect = {
				set_country_flag = modernized_succession_laws
			}
		}
	}

	recall_von_lettow_vorbeck = {

		allowed = {
			original_tag = GER
		}
		available = {
			has_civil_war = no
		}
		visible = {
			OR = {
				has_country_leader = { ruling_only = yes character = GER_wilhelm_ii }
				has_country_leader = { ruling_only = yes character = GER_wilhelm_iii }
				has_country_leader = { ruling_only = yes character = GER_victoria }
			}
		}
		cost = 25
		fire_only_once = yes
		ai_will_do = {
			factor = 1
		}
		complete_effect = {
			create_corps_commander = {
				name = "Paul von Lettow-Vorbeck"
				gfx = GFX_portrait_ger_von_lettow_vorbeck
				traits = { trickster war_hero media_personality jungle_rat}
				skill = 4
				id = 499
				attack_skill = 3
				defense_skill = 3
				planning_skill = 2
				logistics_skill = 5
			}
		}
	}

	# Safety regulations
	GER_sharpen_air_safety_regulations = {

		allowed = {
			original_tag = GER
			has_dlc = "Waking the Tiger"
		}

		available = {

		}

		cost = 50

		fire_only_once = yes

		ai_will_do = {
			factor = 0
		}

		visible = {
			has_government = neutrality
		}

		complete_effect = {
			add_timed_idea = { idea = GER_air_safety_regulations days = 1095 }
			set_global_flag = GER_air_safety_regulations_flag
		}
	}
	
	
	GER_reintegrate_luxemburg_and_alsace_lorraine = {
		icon = generic_operation
		
		allowed = {
			original_tag = GER
		}

		visible = {
			has_full_control_of_state = 28
		}

		available = {
			is_subject = no
			has_full_control_of_state = 8
			has_full_control_of_state = 28
			has_full_control_of_state = 796
			OR = {
				FRA = { has_capitulated = yes }
				FRA = { is_subject_of = GER }				 
				NOT = {
					any_country = {
						original_tag = FRA
						exists = yes
					}
				}
				owns_state = 28  
			}
			
			OR = {
				BEL = { has_capitulated = yes }
				NOT = {
					any_country = {
						original_tag = BEL
						exists = yes
					}
				}
			}
			has_government = fascism
		}
		
		fire_only_once = yes
		
		ai_will_do = {
			factor = 100
		}


		complete_effect = {
			add_war_support = 0.05
			if = {
				limit = {
					NOT = { owns_state = 28 }
				}
				transfer_state = 28
			}
			if = {
				limit = {
					NOT = { owns_state = 8 }
				}
				transfer_state = 8
			}
			if = {
				limit = {
					NOT = { owns_state = 796 }
				}
				transfer_state = 796
			}
			28 = { 
				set_state_name = "Elsass-Lothringen"
				remove_core_of = VIC
			}
			set_province_name = { id = 9503 name = "Strassburg" }
			set_province_name = { id = 678 name = "Mulhausen" }
			FRA = {
				country_event = { id = wtt_germany.63 }
			}
			LUX = {
				country_event = { id = wtt_germany.64 }
			}
		}
	}

	reintegrate_eastern_claims = {
	
		icon = generic_operation
		
		allowed = {
			original_tag = GER
		}
		visible = {
			original_tag = GER
			OR = {
				has_war_with = POL
				AND = {
					owns_state = 85
					owns_state = 817
					owns_state = 86
					owns_state = 762
					owns_state = 1035
				}
			}
			
		}
		available = {
			OR = {
				AND = {
					has_war_with = POL
					POL = {
						has_capitulated = yes 
					}
					controls_state = 85
					controls_state = 817
					controls_state = 86
					controls_state = 762
					controls_state = 87
					controls_state = 98
					controls_state = 1035
				}
				AND = {
					owns_state = 85
					owns_state = 817
					owns_state = 86
					owns_state = 762
					owns_state = 87
					owns_state = 98
					owns_state = 1035
				}
			}
		}
		
		fire_only_once = yes
		ai_will_do = {
			factor = 100
		}
		
		complete_effect = {
			add_war_support = 0.05
			transfer_state = 85
			transfer_state = 86
			transfer_state = 762
			transfer_state = 817
			transfer_state = 87
			transfer_state = 98
			transfer_state = 1035
			IF = {
				limit = {
					POL = {
						owns_state = 72
					}
				}
				transfer_state = 72
				72 = {
					set_state_name = "Southern Silesia"
				}
			}
			86 = {
				set_state_name = "Posen"
			}
			85 = {
				set_state_name = "West Prussia"
			}
			762 = {
				set_state_name = "Kattowitz"
			}
			
			817 = {
				remove_core_of = DZG
			}
			
			set_province_name = { id = 9263 name = "Gotenhafen" }
			set_province_name = { id = 279 name = "Bromberg" }
			set_province_name = { id = 3295 name = "Thorn" }
			set_province_name = { id = 6558 name = "Posen" }
			set_province_name = { id = 6464 name = "Kattowitz" }
		}
	}
	
	integrate_german_swiss = {
	
		icon = generic_operation
		
		allowed = {
			original_tag = GER
		}
		visible = {
			original_tag = GER
			controls_state = 3
		}
		
		available = {
			controls_state = 3
			OR = {
				owns_state = 3
				SWI = {has_capitulated = yes}
			}
		}
		
		fire_only_once = yes
		ai_will_do = {
			factor = 100
		}
		
		complete_effect = {
			transfer_state = 3
			add_state_core = 3
			transfer_state = 151
			add_state_core = 151
		}
	}
	
	
	GER_brandenburger_decision = {
		icon = generic_operation
		
		allowed = {
			original_tag = GER
		}
		visible = {
			has_tech = tech_special_forces
		}
		
		available = {
			has_tech = tech_special_forces
		}
		
		fire_only_once = yes
		ai_will_do = {
			factor = 100
		}
		
		cost = 100
		
		complete_effect = {
			add_ideas = brandenburger
			add_manpower = -5000
		}
	}
	
	GER_purge_abwehr = {
		icon = generic_political_discourse
		
		allowed = {
			original_tag = GER
		}
		
		visible = {
			has_idea = disloyal_abwehr
			has_idea = tot_economic_mobilisation
		}
		
		available = {
			has_idea = tot_economic_mobilisation
		}
		
		fire_only_once = yes
		ai_will_do = {
			factor = 100
		}
		
		cost = 200
		
		days_remove = 90
		modifier = {
			political_power_gain = -1
			intel_network_gain_factor = -0.5
			intel_from_operatives_factor = -0.5
			intelligence_agency_defense = -1
		}
		
		remove_effect = {
			swap_ideas = {
				remove_idea = disloyal_abwehr
				add_idea = reich_security_main_office
			}
		}
	}
	
	GER_tot_mob_AI_please = {
		icon = generic_political_discourse
		
		allowed = {
			original_tag = GER
		}
		
		visible = {
			is_ai = yes
		}
		
		available = {
			is_ai = yes 
			SOV = {is_ai = no}
			OR = {
				has_war_with = ENG
				has_war_with = FRA
				has_war_with = SOV
				has_war_with = USA
			}
		}
		
		fire_only_once = yes
		ai_will_do = {
			factor = 100
		}
		
		cost = 20
		
		complete_effect = {
			add_ideas = tot_economic_mobilisation
		}
	}
}

foreign_politics = {

	# Titles Deprivation Act 1917
	request_restoration_of_british_titles = {

		allowed = {
			original_tag = GER
		}

		available = {
			ENG = { has_opinion = { target = GER value > 99 } }
			custom_trigger_tooltip = {
				tooltip = hindenburg_destroyed_tt
				NOT = { has_global_flag = hindenburg_destroyed }
			}
		}

		cost = 150

		fire_only_once = yes

		ai_will_do = {
			factor = 0
		}

		visible = {
			has_war = no
			has_government = neutrality
			has_completed_focus = GER_ally_the_shade
			has_country_flag = modernized_succession_laws
		}

		complete_effect = {
			ENG = { country_event = { id = wtt_germany.999 days = 1 } }
			custom_effect_tooltip = request_restoration_of_british_titles_tt
			hidden_effect = { set_global_flag = hindenburg_event_in_progress }
		}
	}

	GER_request_polish_war_participation = {

		icon = generic_prepare_civil_war

		allowed = {
			original_tag = GER
		}

		available = {
			has_war_with = SOV
			NOT = { is_in_faction_with = POL }
		}

		cost = 50

		fire_only_once = yes

		ai_will_do = {
			factor = 200
		}

		visible = {
			has_country_flag = poland_traded_danzig
			has_completed_focus = GER_tackle_the_communist_threat
		}

		complete_effect = {
			POL = { country_event = { id = wtt_germany.65 hours = 6 } }
		}

	}
	
	GER_DOW_USA = {
	
		icon = decision_generic_break_treaty
		allowed = {
			original_tag = GER
		}
		
		visible = {
			OR = {
				has_war_with = ENG 
				has_war_with = SOV 
				has_war_with = USA
			}
			NOT = {
				is_in_faction_with = USA
			}
			USA = {
				OR = {
					
					is_in_faction_with = ENG
					
					focus_progress = {
						focus = USA_DOW_ger_focus
						progress > 0.3
					} 
					has_war_with = GER					
				}
			}
		}
	
		available = {
			has_war_with = ENG
			NOT = { is_in_faction_with = USA }
			USA = {
				OR = {
					
					is_in_faction_with = ENG
					
					focus_progress = {
						focus = USA_DOW_ger_focus
						progress > 0.3
					} 
					has_war_with = GER					
				}
			}
		}
	

		fire_only_once = yes
	
		ai_will_do = {
			factor = 20000
		}
		
		complete_effect = {
			GER = { declare_war_on = { target = USA type = annex_everything }}
			USA = {add_timed_idea = { idea = GER_happy_time days = 275 }}
			news_event = news.800
			#set_global_flag = GER_USA_DOW
			IF = {
				limit = {
					is_ai = yes
					#SOV = {is_ai = yes}
					has_war_with = SOV
				}
				complete_national_focus = GER_total_mobilisation
				complete_national_focus = GER_total_war
			}
		}
	}
	
	GER_ALIGN_FIN = {
	
		icon = generic_operation
		allowed = {
			original_tag = GER
		}
		
		available = {
			has_completed_focus = GER_anti_comitern_pact
			NOT = { is_in_faction_with = FIN }	
			date > 1941.1.1
			any_country = {
				OR = {
					original_tag = GER 
					is_subject_of = GER
				}
				has_full_control_of_state = 144 #Narvik
				has_full_control_of_state = 1036 #Riga
				has_full_control_of_state = 1040 #Talinn
			}
		}
		
		cost = 25
		
		fire_only_once = yes
	
		ai_will_do = {
			factor = 200
		}
		
		visible = {
			FIN = {
				NOT = {
					has_government = communism
					owns_state = 146
					has_war = yes					
				}
				is_ai = yes
			}
			GER = {
				NOT = {
					is_in_faction_with = SOV
				}
			}
			SOV = {
				controls_state = 146
			}
		
		}
		
		complete_effect = {
		
			GER = {
				add_to_faction = FIN
			}
		}	
	}
	
	GER_drag_FIN = {
	
		icon = generic_operation
		allowed = {
			original_tag = GER
		}
		
		available = {
			has_completed_focus = GER_anti_comitern_pact
			is_in_faction_with = FIN 
			GER = {
				controls_state = 1036 #Riga
				controls_state = 1040 #Talinn
			}
		}
		
		fire_only_once = yes
	
		ai_will_do = {
			factor = 200
		}
		
		visible = {
			FIN = {
				NOT = {
					has_government = communism
					controls_state = 146				
				}
				is_ai = yes
			}
			GER = {
				NOT = {
					is_in_faction_with = SOV
				}
			}
			SOV = {
				controls_state = 146
			}
		
		}
		
		complete_effect = {
		
			FIN = {
				declare_war_on = { target = SOV type = annex_everything }
			}
		
		}	
	}
	
	GER_DOW_YUG = {
	
		icon = generic_operation
		allowed = {
			original_tag = GER
		}
		
		available = {
			GER = { 
				has_war_with = GRE 
				NOT = {
					is_in_faction_with = YUG
					has_war_with = YUG
				}
			}
		}
		
		visible = {
			GER = { has_war_with = GRE }
			NOT = {
					is_in_faction_with = YUG
					has_war_with = YUG
			}
			YUG = {exists = yes }
		}
		
		ai_will_do = {
			factor = 100
			modifier = {
				date < 1941.3.1
				factor = 0
			}
		}
		
		complete_effect = {
			IF = {
				limit = {
					BUL = {
						is_ai = yes
						is_in_faction = no
					}
				}
				GER = {
					add_to_faction = BUL
				}
				BUL = {
					declare_war_on = { target = YUG type = annex_everything }
				}
			}
			
			IF = {
				limit = {
					ROM = {
						is_ai = yes
						is_in_faction = no
					}
				}
				
				ROM = {
					give_military_access = GER
				}
			}
		
			GER = {
				declare_war_on = { target = YUG type = annex_everything }
			}
		
		}
	}
	
	GER_reorganize_yugoslavia = {
		icon = generic_operation
		
		fire_only_once = yes
	
		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				ITA = {
					is_ai = no
				}
			}
		}
		cost = 0
		
		allowed = {
			original_tag = GER
		}
		available = {
			OR = {
				AND = {
					GER = {
						has_war_with = YUG
					}
					YUG = {
						has_capitulated = yes
					}
				}
				YUG = {exists = no}
			}
			HUN = {
				exists = yes
				OR = {
					has_government = fascism
					has_government = neutrality
				}
			}
			BUL = {
				exists = yes
				OR = {
					has_government = fascism
					has_government = neutrality
				}
			}
			ITA = {
				exists = yes
				OR = {
					has_government = fascism
					has_government = neutrality
				}
			}
			OR = {
				AND = {
					GER = {
						has_war_with = GRE
					}
					GRE = {
						has_capitulated = yes
					}
				}
				GRE = {exists = no}
				GRE = {
					is_in_faction_with = GER
				}
			}
		}
		
		visible = {
			GER = {
				OR = {
					has_war_with = YUG
					YUG = {exists = no}
				}
				is_in_faction_with = ITA 
				# is_in_faction_with = BUL
				is_in_faction_with = HUN
			}
		}
		complete_effect = {
			CRO = {
				transfer_state = 109
				#transfer_state = 103
				transfer_state = 104
				transfer_state = 914
			}
			
			GER = {
				set_autonomy = {
					target = CRO
					autonomy_state = autonomy_satellite
				}
				set_state_controller = 1062
				add_state_claim = 1062
				set_state_controller = 107
				set_state_controller = 108
				set_state_controller = 764
				
			}
			HUN = {
				transfer_state = 45
				transfer_state = 1063
				add_state_claim = 1063
			}
			BUL = {
				transfer_state = 106
				transfer_state = 913
				if = {
					limit = {
						BUL = {
							is_ai = yes
							is_in_faction = no
						}
					}
					GER = {
						add_to_faction = BUL
					}
				}
			}
			
			ITA = {
				transfer_state = 105
				add_state_claim = 103
				transfer_state = 103
				transfer_state = 912
				transfer_state = 102
				add_state_claim = 102
			}
		}
	}
	
	GER_reorganize_greece = {
		icon = generic_operation
		
		fire_only_once = yes
	
		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				ITA = {
					is_ai = no
				}
			}
		}
		cost = 0
		
		allowed = {
			original_tag = GER
		}
		available = {
			OR = {
				AND = {
					GER = {
						has_war_with = GRE
					}
					GRE = {
						has_capitulated = yes
					}
				}
				GRE = {exists = no}
			}
			BUL = {
				exists = yes
				OR = {
					has_government = fascism
					has_government = neutrality
				}
			}
			ITA = {
				exists = yes
				OR = {
					has_government = fascism
					has_government = neutrality
				}
			}
		}
		
		visible = {
			GER = {
				OR = {
					has_war_with = GRE
					GRE = {exists = no}
				}
				is_in_faction_with = ITA 			
				is_in_faction_with = BUL			
			}
		}
		complete_effect = {
			
			
			BUL = {
				transfer_state = 731
				transfer_state = 184
			}
			ITA = {
				transfer_state = 185
				transfer_state = 186
				transfer_state = 187
				transfer_state = 47
			}
		}
	}
	
	GER_DOW_SOV = {
	
		icon = decision_generic_break_treaty
		allowed = {
			original_tag = GER
		}
		
		available = {
			SOV = {
				has_idea = sov_revanchism
			}
		}
		
		visible = {
			SOV = {
				has_idea = sov_revanchism
			}
		}
		
		
		fire_only_once = yes
	
		ai_will_do = {
			factor = 25
		}
		
		complete_effect = {
		
			GER = {
				create_wargoal = {
					type = puppet_wargoal_focus
					target = SOV
				}
			}
		
		}
	}
	
	GER_seize_tunisia = {
		allowed = {
			original_tag = GER
		}
		visible = {
			ITA = {
				is_in_faction_with = GER
				controls_state = 448
				controls_state = 115
				NOT = {
					controls_state = 665
					controls_state = 458
				}
			}
			any_country_with_original_tag = {
				original_tag_to_check = FRA
				has_government = fascism
				OR = {
					is_subject_of = GER
					has_focus_tree = vichy_french_focus
				}
				has_war_with = USA
			}
		}
		available = {
			ITA = {
				is_in_faction_with = GER
				controls_state = 448
				controls_state = 115
				NOT = {
					controls_state = 665
					controls_state = 458
				}
			}
			any_country_with_original_tag = {
				original_tag_to_check = FRA
				has_government = fascism
				OR = {
					is_subject_of = GER
					has_focus_tree = vichy_french_focus
				}
				has_war_with = USA
			}
		}
		
		fire_only_once = yes
	
		ai_will_do = {
			factor = 25
		}
		
		
		complete_effect = {
			ITA = {
				transfer_state = 665
				transfer_state = 458
			}
		}		
	}
	
	GER_stop_spanish_resources = {
	
		icon = tungsten
		
		allowed = {
			original_tag = GER
		}
		
		visible = {
			has_country_flag = spanish_resource_concessions
			NOT = {
				has_country_flag = spanish_resources_stopped
			}
		}
		
		available = {
			has_war_with = FRA 
			OR = { #France does not control South-West 
				FRA = {
					has_capitulated = no
				}
				FRA = {
					controls_state = 19 #aquitaine
				}
				FRA = {
					controls_state = 23 #Poitou
				}
				FRA = {
					controls_state = 24 #Centre
				}
			}
		}
		
		ai_will_do = {
			factor = 100
		}
		
		complete_effect = {
		
			hidden_effect = {
				set_country_flag = spanish_resources_stopped
			}
			
			GER = { remove_resource_rights = 171 }
			GER = { remove_resource_rights = 176 }
		
		}
		
	}
	
	GER_resume_spanish_resources = {
	
		icon = tungsten
		
		allowed = {
			original_tag = GER
		}
		
		visible = {
			has_country_flag = spanish_resources_stopped
		}
		
		available = {
			OR = {
				NOT = {
					has_war_with = FRA
				}
				AND = {
					FRA = {
						has_capitulated = yes
					}
					FRA = {
						NOT = {
							controls_state = 19
						}
					}
					FRA = {
						NOT = {
							controls_state = 23
						}
					}
					FRA = {
						NOT = {
							controls_state = 24
						}
					}
				}
			}
		}
		
		ai_will_do = {
			factor = 100
		}
		
		complete_effect = {
		
			hidden_effect = {
				clr_country_flag = spanish_resources_stopped
			}
			
			SPA = {
				give_resource_rights = { receiver = GER state = 171 }
				give_resource_rights = { receiver = GER state = 176 }
			}
		
		}
		
	}
	
	GER_danubian_membership = {
		allowed = {
			original_tag = GER
		}
		
		visible = {
			has_government = democratic
			is_in_faction = yes
			is_subject = no
		}
		
		available = {
			is_faction_leader = yes
			NOT = { has_war_with = AUS }
			NOT = { has_war_with = CZE }
			NOT = { has_war_with = HUN }
			has_completed_focus = GER_european_union
		}
		
		fire_only_once = yes
		
		cost = 10
		ai_will_do = {
			factor = 10
		}
		
		complete_effect = {
			custom_effect_tooltip = invite_non_fascist_communist_only_TT
			if = {
				limit = {
					AUS = {
						NOT = {
							has_government = communism
							has_government = fascism
						}
					}
					exists = yes
				}
				AUS = {
					country_event = { id = generic.5 }
				}
			}
			if = {
				limit = {
					CZE = {
						NOT = {
							has_government = communism
							has_government = fascism
						}
					}
					exists = yes
				}
				CZE = {
					country_event = { id = generic.5 }
				}
			}
			if = {
				limit = {
					HUN = {
						NOT = {
							has_government = communism
							has_government = fascism
						}
					}
					exists = yes
				}
				HUN = {
					country_event = { id = generic.5 }
				}
			}
		}
		
	}
	
	GER_danubian_expansion = {
		allowed = {
			original_tag = GER
		}
		
		visible = {
			has_government = democratic
			is_in_faction = yes
			is_subject = no
		}
		
		available = {
			is_faction_leader = yes
			NOT = { has_war_with = YUG }
			NOT = { has_war_with = ROM }
			has_completed_focus = GER_european_union
		}
		
		fire_only_once = yes
		
		cost = 10
		ai_will_do = {
			factor = 10
		}
		
		complete_effect = {
			custom_effect_tooltip = invite_non_fascist_communist_only_TT
			if = {
				limit = {
					YUG = {
						NOT = {
							has_government = communism
							has_government = fascism
						}
						exists = yes
					}
				}
				YUG = {
					country_event = { id = generic.5 }
				}
			}
			if = {
				limit = {
					ROM = {
						NOT = {
							has_government = communism
							has_government = fascism
						}
					}
					exists = yes
				}
				ROM = {
					country_event = { id = generic.5 }
				}
			}
		}
		
	}
	
	GER_low_countries_membership = {
		allowed = {
			original_tag = GER
		}
		
		visible = {
			has_government = democratic
			is_in_faction = yes
			is_subject = no
		}
		
		available = {
			is_faction_leader = yes
			NOT = { has_war_with = HOL }
			NOT = { has_war_with = BEL }
			NOT = { has_war_with = LUX }
			has_completed_focus = GER_european_union
		}
		
		fire_only_once = yes
		
		cost = 10
		ai_will_do = {
			factor = 10
		}
		
		complete_effect = {
			custom_effect_tooltip = invite_non_fascist_communist_only_TT
			if = {
				limit = {
					HOL = {
						NOT = {
							has_government = communism
							has_government = fascism
						}
					}
				}
				HOL = {
					country_event = { id = generic.5 }
				}
			}
			if = {
				limit = {
					BEL = {
						NOT = {
							has_government = communism
							has_government = fascism
						}
					}
				}
				BEL = {
					country_event = { id = generic.5 }
				}
			}
			if = {
				limit = {
					LUX = {
						NOT = {
							has_government = communism
							has_government = fascism
						}
					}
				}
				LUX = {
					country_event = { id = generic.5 }
				}
			}
		}
		
	}
	
	GER_scandinavian_membership = {
		allowed = {
			original_tag = GER
		}
		
		visible = {
			has_government = democratic
			is_in_faction = yes
			is_subject = no
		}
		
		available = {
			is_faction_leader = yes
			NOT = { has_war_with = NOR }
			NOT = { has_war_with = SWE }
			NOT = { has_war_with = DEN }
			has_completed_focus = GER_european_union
		}
		
		fire_only_once = yes
		
		cost = 10
		ai_will_do = {
			factor = 10
		}
		
		complete_effect = {
			custom_effect_tooltip = invite_non_fascist_communist_only_TT
			if = {
				limit = {
					NOR = {
						NOT = {
							has_government = communism
							has_government = fascism
						}
					}
				}
				NOR = {
					country_event = { id = generic.5 }
				}
			}
			if = {
				limit = {
					SWE = {
						NOT = {
							has_government = communism
							has_government = fascism
						}
					}
				}
				SWE = {
					country_event = { id = generic.5 }
				}
			}
			if = {
				limit = {
					DEN = {
						NOT = {
							has_government = communism
							has_government = fascism
						}
					}
				}
				DEN = {
					country_event = { id = generic.5 }
				}
			}
		}
		
	}
	
	GER_baltic_membership = {
		allowed = {
			original_tag = GER
		}
		
		visible = {
			has_government = democratic
			is_in_faction = yes
			is_subject = no
		}
		
		available = {
			is_faction_leader = yes
			NOT = { has_war_with = EST }
			NOT = { has_war_with = LAT }
			NOT = { has_war_with = LIT }
			SOV = {
				OR = {
					NOT = { has_war_with = EST }
					NOT = { has_war_with = LAT }
					NOT = { has_war_with = LIT }
				}
			}
			has_completed_focus = GER_european_union
		}
		
		fire_only_once = yes
		
		cost = 10
		ai_will_do = {
			factor = 10
		}
		
		complete_effect = {
			add_named_threat = { threat = 5 name = GER_baltic_membership }
			custom_effect_tooltip = invite_non_fascist_communist_only_TT
			if = {
				limit = {
					EST = {
						NOT = {
							has_government = communism
							has_government = fascism
						}
					}
				}
				EST = {
					country_event = { id = generic.5 }
					add_ai_strategy = {
						type = alliance
						id = "GER"			
						value = 200
					}	
				}
			}
			if = {
				limit = {
					LAT = {
						NOT = {
							has_government = communism
							has_government = fascism
						}
					}
				}
				LAT = {
					country_event = { id = generic.5 }
					add_ai_strategy = {
						type = alliance
						id = "GER"			
						value = 200
					}	
				}
			}
			if = {
				limit = {
					LIT = {
						NOT = {
							has_government = communism
							has_government = fascism
						}
					}
				}
				LIT = {
					country_event = { id = generic.5 }
					add_ai_strategy = {
						type = alliance
						id = "GER"			
						value = 200
					}	
				}
			}
			SOV = { country_event = { id = wtt_germany.21 } }
			POL = {
				add_ai_strategy = {
					type = alliance
					id = "ENG"			
					value = -500
				}	
			}
			FIN = {
				add_ai_strategy = {
					type = alliance
					id = "ENG"			
					value = -500
				}	
			}
		}
		
	}
	
	GER_polish_membership = {
		allowed = {
			original_tag = GER
		}
		
		visible = {
			has_government = democratic
			is_in_faction = yes
			is_subject = no
		}
		
		available = {
			is_faction_leader = yes
			NOT = { has_war_with = POL }
			SOV = { NOT = { has_war_with = POL } }
			has_completed_focus = GER_european_union
		}
		
		fire_only_once = yes
		
		cost = 10
		ai_will_do = {
			factor = 10
		}
		
		complete_effect = {
			add_named_threat = { threat = 5 name = GER_polish_membership }
			custom_effect_tooltip = invite_non_fascist_communist_only_TT
			if = {
				limit = {
					POL = {
						NOT = {
							has_government = communism
							has_government = fascism
						}
					}
				}
				POL = {
					country_event = { id = generic.5 }
					add_ai_strategy = {
						type = alliance
						id = "GER"			
						value = 200
					}	
				}
			}
			SOV = { country_event = { id = wtt_germany.22 } }
			EST = {
				add_ai_strategy = {
					type = alliance
					id = "ENG"			
					value = -500
				}	
			}
			LAT = {
				add_ai_strategy = {
					type = alliance
					id = "ENG"			
					value = -500
				}	
			}
			LIT = {
				add_ai_strategy = {
					type = alliance
					id = "ENG"			
					value = -500
				}	
			}
			FIN = {
				add_ai_strategy = {
					type = alliance
					id = "ENG"			
					value = -500
				}	
			}
		}
		
	}
	
	GER_finnish_membership = {
		allowed = {
			original_tag = GER
		}
		
		visible = {
			has_government = democratic
			is_in_faction = yes
			is_subject = no
		}
		
		available = {
			is_faction_leader = yes
			NOT = { has_war_with = FIN }
			SOV = { NOT = { has_war_with = FIN } }
			has_completed_focus = GER_european_union
		}
		
		fire_only_once = yes
		
		cost = 10
		ai_will_do = {
			factor = 10
		}
		
		complete_effect = {
			add_named_threat = { threat = 5 name = GER_finnish_membership }
			custom_effect_tooltip = invite_non_fascist_communist_only_TT
			if = {
				limit = {
					FIN = {
						NOT = {
							has_government = communism
							has_government = fascism
						}
					}
				}
				FIN = {
					country_event = { id = generic.5 }
					add_ai_strategy = {
						type = alliance
						id = "GER"			
						value = 200
					}	
				}
			}
			SOV = { country_event = { id = wtt_germany.23 } }
			EST = {
				add_ai_strategy = {
					type = alliance
					id = "ENG"			
					value = -500
				}	
			}
			LAT = {
				add_ai_strategy = {
					type = alliance
					id = "ENG"			
					value = -500
				}	
			}
			LIT = {
				add_ai_strategy = {
					type = alliance
					id = "ENG"			
					value = -500
				}	
			}
			POL = {
				add_ai_strategy = {
					type = alliance
					id = "ENG"			
					value = -500
				}	
			}
		}
		
	}
	
	
	GER_no_balkan_communism = {
		allowed = {
			original_tag = GER
		}
		
		visible = {
			has_government = democratic
			is_in_faction = yes
			is_subject = no
		}
		
		available = {
			is_faction_leader = yes
			has_completed_focus = GER_democratic_beacon
			OR = {
				any_country = { 
					original_tag = HUN
					has_government = communism 
				}
				any_country = { 
					original_tag = HUN
					has_government = fascism 
				}
				any_country = { 
					original_tag = ROM
					has_government = communism 
				}
				any_country = { 
					original_tag = ROM
					has_government = fascism
				}
				any_country = { 
					original_tag = YUG
					has_government = communism 
				}
				any_country = { 
					original_tag = YUG
					has_government = fascism 
				}
				any_country = { 
					original_tag = BUL
					has_government = communism 
				}
				any_country = { 
					original_tag = BUL
					has_government = fascism 
				}
			}
		}
		
		fire_only_once = yes
		
		cost = 10
		ai_will_do = {
			factor = 10
		}
		
		complete_effect = {
			custom_effect_tooltip = GER_no_balkan_communism_tt
			if = {
				limit = {
					any_country = { 
						original_tag = HUN
						has_government = communism 
					}
				}
				custom_effect_tooltip = GER_no_balkan_communism_HUN_tt
				hidden_effect = {
					random_other_country = {
						limit = {
							original_tag = HUN
							has_government = communism
						}
						GER = {
							create_wargoal = {
								type = topple_government
								target = PREV
							}
						}
					}
				}
			}
			if = {
				limit = {
					any_country = { 
						original_tag = HUN
						has_government = fascism 
					}
				}
				custom_effect_tooltip = GER_no_balkan_communism_HUN_tt
				hidden_effect = {
					random_other_country = {
						limit = {
							original_tag = HUN
							has_government = fascism
						}
						GER = {
							create_wargoal = {
								type = topple_government
								target = PREV
							}
						}
					}
				}
			}
			if = {
				limit = {
					any_country = { 
						original_tag = ROM
						has_government = communism 
					}
				}
				custom_effect_tooltip = GER_no_balkan_communism_ROM_tt
				hidden_effect = {
					random_other_country = {
						limit = {
							original_tag = ROM
							has_government = communism
						}
						GER = {
							create_wargoal = {
								type = topple_government
								target = PREV
							}
						}
					}
				}
			}
			if = {
				limit = {
					any_country = { 
						original_tag = ROM
						has_government = fascism 
					}
				}
				custom_effect_tooltip = GER_no_balkan_communism_ROM_tt
				hidden_effect = {
					random_other_country = {
						limit = {
							original_tag = ROM
							has_government = fascism
						}
						GER = {
							create_wargoal = {
								type = topple_government
								target = PREV
							}
						}
					}
				}
			}
			if = {
				limit = {
					any_country = { 
						original_tag = YUG
						has_government = communism 
					}
				}
				custom_effect_tooltip = GER_no_balkan_communism_YUG_tt
				hidden_effect = {
					random_other_country = {
						limit = {
							original_tag = YUG
							has_government = communism
						}
						GER = {
							create_wargoal = {
								type = topple_government
								target = PREV
							}
						}
					}
				}
			}
			if = {
				limit = {
					any_country = { 
						original_tag = YUG
						has_government = fascism 
					}
				}
				custom_effect_tooltip = GER_no_balkan_communism_YUG_tt
				hidden_effect = {
					random_other_country = {
						limit = {
							original_tag = YUG
							has_government = fascism
						}
						GER = {
							create_wargoal = {
								type = topple_government
								target = PREV
							}
						}
					}
				}
			}
			if = {
				limit = {
					any_country = { 
						original_tag = BUL
						has_government = communism 
					}
				}
				custom_effect_tooltip = GER_no_balkan_communism_BUL_tt
				hidden_effect = {
					random_other_country = {
						limit = {
							original_tag = BUL
							has_government = communism
						}
						GER = {
							create_wargoal = {
								type = topple_government
								target = PREV
							}
						}
					}
				}
			}
			if = {
				limit = {
					any_country = { 
						original_tag = BUL
						has_government = fascism 
					}
				}
				custom_effect_tooltip = GER_no_balkan_communism_BUL_tt
				hidden_effect = {
					random_other_country = {
						limit = {
							original_tag = BUL
							has_government = fascism
						}
						GER = {
							create_wargoal = {
								type = topple_government
								target = PREV
							}
						}
					}
				}
			}
		}
		
	}
	
	GER_no_reds_in_western_europe = {
		allowed = {
			original_tag = GER
		}
		
		visible = {
			has_government = democratic
			is_in_faction = yes
			is_subject = no
		}
		
		available = {
			is_faction_leader = yes
			
			has_completed_focus = GER_democratic_beacon
			
			OR = {
				any_country = { 
					original_tag = FRA
					has_government = communism 
				}
				any_country = { 
					original_tag = FRA
					has_government = fascism 
				}
				any_country = { 
					original_tag = HOL
					has_government = communism 
				}
				any_country = { 
					original_tag = HOL
					has_government = fascism
				}
				any_country = { 
					original_tag = BEL
					has_government = communism 
				}
				any_country = { 
					original_tag = BEL
					has_government = fascism
				}
				any_country = { 
					original_tag = LUX
					has_government = communism 
				}
				any_country = { 
					original_tag = LUX
					has_government = fascism 
				}
				any_country = { 
					original_tag = ITA
					has_government = communism 
				}
				any_country = { 
					original_tag = ITA
					has_government = fascism 
				}
				any_country = { 
					original_tag = SPR
					has_government = communism 
				}
				any_country = { 
					original_tag = SPR
					has_government = fascism 
				}
				any_country = { 
					original_tag = POR
					has_government = communism 
				}
				any_country = { 
					original_tag = POR
					has_government = fascism 
				}
			}
		}
		
		fire_only_once = yes
		
		cost = 10
		ai_will_do = {
			factor = 10
		}
		
		complete_effect = {
			custom_effect_tooltip = GER_no_reds_in_western_europe_tt
			if = {
				limit = {
					any_country = { 
						original_tag = FRA
						has_government = communism 
					}
				}
				custom_effect_tooltip = GER_no_reds_in_western_europe_FRA_tt
				hidden_effect = {
					random_other_country = {
						limit = {
							original_tag = FRA
							has_government = communism
						}
						GER = {
							create_wargoal = {
								type = topple_government
								target = PREV
							}
						}
					}
				}
			}
			if = {
				limit = {
					any_country = { 
						original_tag = FRA
						has_government = fascism
					}
				}
				custom_effect_tooltip = GER_no_reds_in_western_europe_FRA_tt
				hidden_effect = {
					random_other_country = {
						limit = {
							original_tag = FRA
							has_government = fascism
						}
						GER = {
							create_wargoal = {
								type = topple_government
								target = PREV
							}
						}
					}
				}
			}
			if = {
				limit = {
					any_country = { 
						original_tag = HOL
						has_government = communism 
					}
				}
				custom_effect_tooltip = GER_no_reds_in_western_europe_HOL_tt
				hidden_effect = {
					random_other_country = {
						limit = {
							original_tag = HOL
							has_government = communism
						}
						GER = {
							create_wargoal = {
								type = topple_government
								target = PREV
							}
						}
					}
				}
			}
			if = {
				limit = {
					any_country = { 
						original_tag = HOL
						has_government = fascism
					}
				}
				custom_effect_tooltip = GER_no_reds_in_western_europe_HOL_tt
				hidden_effect = {
					random_other_country = {
						limit = {
							original_tag = HOL
							has_government = fascism
						}
						GER = {
							create_wargoal = {
								type = topple_government
								target = PREV
							}
						}
					}
				}
			}
			if = {
				limit = {
					any_country = { 
						original_tag = BEL
						has_government = communism 
					}
				}
				custom_effect_tooltip = GER_no_reds_in_western_europe_BEL_tt
				hidden_effect = {
					random_other_country = {
						limit = {
							original_tag = BEL
							has_government = communism
						}
						GER = {
							create_wargoal = {
								type = topple_government
								target = PREV
							}
						}
					}
				}
			}
			if = {
				limit = {
					any_country = { 
						original_tag = BEL
						has_government = fascism
					}
				}
				custom_effect_tooltip = GER_no_reds_in_western_europe_BEL_tt
				hidden_effect = {
					random_other_country = {
						limit = {
							original_tag = BEL
							has_government = fascism
						}
						GER = {
							create_wargoal = {
								type = topple_government
								target = PREV
							}
						}
					}
				}
			}
			if = {
				limit = {
					any_country = { 
						original_tag = LUX
						has_government = communism 
					}
				}
				custom_effect_tooltip = GER_no_reds_in_western_europe_LUX_tt
				hidden_effect = {
					random_other_country = {
						limit = {
							original_tag = LUX
							has_government = communism
						}
						GER = {
							create_wargoal = {
								type = topple_government
								target = PREV
							}
						}
					}
				}
			}
			if = {
				limit = {
					any_country = { 
						original_tag = LUX
						has_government = fascism
					}
				}
				custom_effect_tooltip = GER_no_reds_in_western_europe_LUX_tt
				hidden_effect = {
					random_other_country = {
						limit = {
							original_tag = LUX
							has_government = fascism
						}
						GER = {
							create_wargoal = {
								type = topple_government
								target = PREV
							}
						}
					}
				}
			}
			if = {
				limit = {
					any_country = { 
						original_tag = ITA
						has_government = communism 
					}
				}
				custom_effect_tooltip = GER_no_reds_in_western_europe_ITA_tt
				hidden_effect = {
					random_other_country = {
						limit = {
							original_tag = ITA
							has_government = communism
						}
						GER = {
							create_wargoal = {
								type = topple_government
								target = PREV
							}
						}
					}
				}
			}
			if = {
				limit = {
					any_country = { 
						original_tag = ITA
						has_government = fascism
					}
				}
				custom_effect_tooltip = GER_no_reds_in_western_europe_ITA_tt
				hidden_effect = {
					random_other_country = {
						limit = {
							original_tag = ITA
							has_government = fascism
						}
						GER = {
							create_wargoal = {
								type = topple_government
								target = PREV
							}
						}
					}
				}
			}
			if = {
				limit = {
					any_country = { 
						original_tag = SPR
						has_government = communism 
					}
				}
				custom_effect_tooltip = GER_no_reds_in_western_europe_SPR_tt
				hidden_effect = {
					random_other_country = {
						limit = {
							original_tag = SPR
							has_government = communism
						}
						GER = {
							create_wargoal = {
								type = topple_government
								target = PREV
							}
						}
					}
				}
			}
			if = {
				limit = {
					any_country = { 
						original_tag = SPR
						has_government = fascism
					}
				}
				custom_effect_tooltip = GER_no_reds_in_western_europe_SPR_tt
				hidden_effect = {
					random_other_country = {
						limit = {
							original_tag = SPR
							has_government = fascism
						}
						GER = {
							create_wargoal = {
								type = topple_government
								target = PREV
							}
						}
					}
				}
			}
			if = {
				limit = {
					any_country = { 
						original_tag = POR
						has_government = communism 
					}
				}
				custom_effect_tooltip = GER_no_reds_in_western_europe_POR_tt
				hidden_effect = {
					random_other_country = {
						limit = {
							original_tag = POR
							has_government = communism
						}
						GER = {
							create_wargoal = {
								type = topple_government
								target = PREV
							}
						}
					}
				}
			}
			if = {
				limit = {
					any_country = { 
						original_tag = POR
						has_government = fascism
					}
				}
				custom_effect_tooltip = GER_no_reds_in_western_europe_POR_tt
				hidden_effect = {
					random_other_country = {
						limit = {
							original_tag = POR
							has_government = fascism
						}
						GER = {
							create_wargoal = {
								type = topple_government
								target = PREV
							}
						}
					}
				}
			}
		}
		
	}
	
	
	
	
	
	
}

#Category only allowed for GER
GER_military_buildup = {

	GER_ship_objective_1 = { #Finish starting queue save BBs, research bonus on screens

		icon = generic_naval

		available = {

			has_navy_size = {
				unit = panzerschiff
				size > 2
			}
			#has_navy_size = {
			#	unit = heavy_cruiser
			#	size > 0
			#}
			has_navy_size = {
				unit = destroyer
				size > 19
			}
		}

		fire_only_once = yes
		days_mission_timeout = 730
		is_good = no
		activation = {
			has_completed_focus = GER_naval_effort
		}


		visible = {
			has_completed_focus = GER_naval_effort
		}

		complete_effect = {
			navy_experience = 50
			add_tech_bonus = {
				name = dd_bonus
				bonus = 1.0
				uses = 1
				category = dd_tech
			}
			add_tech_bonus = {
				name = cr_bonus
				bonus = 1.0
				uses = 1
				category = cl_tech
				category = ca_tech
			}
			add_tech_bonus = {
				name = ca_gun_bonus
				ahead_reduction = 1
				uses = 1
				category = ca_gun_tech
			}
			add_tech_bonus = {
				name = cl_gun_bonus
				ahead_reduction = 1
				uses = 1
				category = cl_gun_tech
			}
			add_doctrine_cost_reduction = {
				name = naval_doc_bonus
				cost_reduction = 0.5
				uses = 1
				category = naval_doctrine
			}
		}
	}
	
	GER_ship_objective_2 = { #Finish Sharnhorsts, get research bonus on capitals

		icon = generic_naval

		available = {
			has_navy_size = {
				unit = battleship
				size > 3
			}
		}

		fire_only_once = yes
		days_mission_timeout = 730
		is_good = no
		activation = {
			has_completed_focus = GER_naval_effort2
		}


		visible = {
			has_completed_focus = GER_naval_effort2
		}

		complete_effect = {
			if ={
				limit = { has_idea = aftermath_of_versailles_spirit }
				swap_ideas = {
					remove_idea = aftermath_of_versailles_spirit
					add_idea = legacy_resurgent_spirit
				}
			}
			navy_experience = 50
			add_doctrine_cost_reduction = {
				name = naval_doc_bonus
				cost_reduction = 0.5
				uses = 1
				category = naval_doctrine
			}
			add_tech_bonus = {
				name = capital_ships_bonus
				bonus = 1.0
				uses = 2
				category = bb_tech
			}
			add_tech_bonus = {
				name = heavy_battery_bonus
				bonus = 1.0
				uses = 4
				category = cat_ship_heavy_battery
			}
			add_tech_bonus = {
				name = adv_heavy_battery_bonus
				ahead_reduction = 1
				bonus = 1.0
				uses = 2
				category = cat_adv_ship_heavy_battery
			}
			add_tech_bonus = {
				name = advanced_engine_bonus
				ahead_reduction = 1
				bonus = 1
				uses = 1
				technology = advanced_engine		
			}
		}
	}

	GER_plan_z = {

		icon = generic_naval

		available = {
			
			set_temp_variable = { heavy_cruisers_and_panzerschiffe = num_ships_with_type@heavy_cruiser }
			add_to_temp_variable = { heavy_cruisers_and_panzerschiffe = num_ships_with_type@panzerschiff }
			set_temp_variable = { bb_and_cv = num_ships_with_type@battleship }
			add_to_temp_variable = { bb_and_cv = num_ships_with_type@carrier }


			has_navy_size = {
				unit = battleship
				size > 7
			}
			custom_trigger_tooltip = {
				tooltip = bb_and_cv_tt
				check_variable = {
					bb_and_cv > 15
				}
			}
			OR = {
				custom_trigger_tooltip = {
					tooltip = heavy_cruisers_and_panzerschiffe_tt
					check_variable = {
						heavy_cruisers_and_panzerschiffe > 19
					}
				}
				has_navy_size = {
					unit = battle_cruiser
					size > 2
				}
			}
			has_navy_size = {
				unit = light_cruiser
				size > 43
			}
			has_navy_size = {
				unit = destroyer
				size > 157
			}
			has_navy_size = {
				unit = submarine
				size > 248
			}
		}

		fire_only_once = yes
		days_mission_timeout = 3287
		is_good = no
		activation = {
			has_completed_focus = GER_plan_z
		}


		visible = {
			has_completed_focus = GER_plan_z
		}

		complete_effect = {
			add_war_support = 0.05
			navy_experience = 300
			add_doctrine_cost_reduction = {
				name = naval_doc_bonus
				cost_reduction = 0.75
				uses = 3
				category = naval_doctrine
			}
			if ={
				limit = { has_idea = legacy_resurgent_spirit }
				set_country_flag = plan_z_completed
				swap_ideas = {
					remove_idea = legacy_resurgent_spirit
					add_idea = legacy_of_the_high_seas_fleet_spirit
				}
			}
		}


	}

	GER_jaegernotprogramm = {

		icon = generic_air

		available = {
			has_war = yes
			AND = {
				has_deployed_air_force_size = {
					type = fighter
					size < 750
				}
				has_equipment = {
					fighter_equipment < 250
				}
			}
			NOT = {
				has_idea = GER_jaegernotprogramm
			}
		}

		cost = 50
		fire_only_once = yes
		ai_will_do = {
			factor = 1
		}

		visible = {
			has_war = yes
			AND = {
				has_deployed_air_force_size = {
					type = fighter
					size < 750
				}
				has_equipment = {
					fighter_equipment < 250
				}
			}
			NOT = {
				has_idea = GER_jaegernotprogramm
			}
		}

		complete_effect = {
			add_stability = -0.05
			add_war_support = -0.05
			add_timed_idea = { idea = GER_jaegernotprogramm days = 90 }
		}
	}
	
	GER_Snorkels = {
		icon = generic_naval
		
		allowed = {
			original_tag = GER
		}
		
		visible = {
			OR = {
				AND = {
					has_war_with = HOL 
					HOL = {
						has_capitulated = yes
					}
					GER = {
						controls_state = 7
					}
				}
				AND = {
					HOL = {
						exists = no
					}
					GER = {
						controls_state = 7
					}
				}
				HOL = {
					is_in_faction_with = GER
				}
				any_country = {
					OR = {
						original_tag = GER
						is_subject_of = GER
					}
					has_full_control_of_state = 7 
				}
			}
		}
		
		available = {
			#has_navy_experience > 49
		}
		
		cost = 25
		ai_will_do = {
			factor = 100 
		}
		fire_only_once = yes
		
		complete_effect = {
			#navy_experience = -50
			add_tech_bonus = {
				name = GER_Snorkels
				technology = basic_submarine_snorkel
				ahead_reduction = 1.0
				uses = 1
			}
			add_tech_bonus = {
				name = GER_Snorkels
				technology = improved_submarine_snorkel
				ahead_reduction = 1.0
				uses = 1
			}
		}
	}
	
	GER_correct_bad_torpedoes = {
		allowed = {
			tag = GER
		}
		visible = {
			has_idea = GER_bad_torpedoes
		}
		
		available = {
			has_navy_experience > 150
			command_power > 50
			#has_idea = donitz
		}
		fire_only_once = yes
		cost = 50
		days_remove = 90
		
		ai_will_do = {
			factor = 0
		}
		
		complete_effect = {
			navy_experience = -150
			add_command_power = -50
		}
		
		modifier = {
			industrial_capacity_dockyard = -0.075
		}
		
		remove_effect = {
			remove_ideas = GER_bad_torpedoes
			
		}
	}
	
	GER_baustab_becker = {
	
		icon = generic_industry
		
		allowed = {
			tag = GER
		}
		
		visible = {
			date > 1942.1.1
			has_war_with = SOV
			FRA = {
				has_capitulated = yes
			}
		}
		
		available = {
			has_tech = ger_light_1_5_td
		}
		fire_only_once = yes
		cost = 50
		
		ai_will_do = {
			factor = 10
		}
		
		days_remove = 60
		
		remove_effect = {
			add_equipment_to_stockpile = {
				type =  ger_light_td_equipment_1_5
				amount = 190
				producer = GER
			}
		}
		
	}
}

special_projects = {
	GER_begin_heavy_water_production = {
		allowed = {
			original_tag = GER
			has_dlc = "La Resistance"
		}
		available = {
			110 = {
				CONTROLLER = {
					OR = {
						tag = ROOT
						is_subject_of = ROOT
					}
				}
			}
		}
		visible = {
			has_tech = atomic_research
			NOT = {
				has_country_flag = heavy_water_completed
			}
		}
		
		cost = 0
		ai_will_do = {
			factor = 5 
		}
		fire_only_once = yes
		cancel_trigger = { NOT = { has_global_flag = GER_heavy_water_production_underway } } #can be removed via intelligence ops
		days_remove = 365
		remove_effect = {
			add_tech_bonus = {
				name = GER_heavy_water
				technology = nuclear_reactor
				uses = 1
				bonus = 2
			}
			set_country_flag = heavy_water_completed
		}
		complete_effect = { set_global_flag = GER_heavy_water_production_underway }
	}

	GER_peenemunde = {
		allowed = {
			original_tag = GER
		}
		available = {
			has_tech = experimental_rockets
			62 = {
				CONTROLLER = {
					OR = {
						tag = ROOT
						is_subject_of = ROOT
					}
				}
			}
			num_of_civilian_factories_available_for_projects > 79
		}
		visible = {
			has_completed_focus = GER_rocketry_focus
		}
		
		cost = 0
		ai_will_do = {
			factor = 5 
		}
		fire_only_once = yes
		
		days_remove = 120
		modifier = {
			civilian_factory_use = 80
		}
		remove_effect = {
			add_tech_bonus = {
				name = GER_rocketry_focus
				ahead_reduction = 3
				uses = 1
				technology = rocket_engines
			}
			add_tech_bonus = {
				name = GER_rocketry_focus
				ahead_reduction = 2
				bonus = 0.5
				uses = 2
				category = rocketry
			}
			62 = {
				add_building_construction = {
					type = rocket_site
					level = 2
				}
			}
		}
	}

	GER_concentration_of_nuclear_research = {
		allowed = {
			original_tag = GER
		}
		available = {
			has_completed_focus = GER_wunderwaffe
			nuclear_reactor > 0
			num_of_civilian_factories_available_for_projects > 119
		}
		visible = {
			has_completed_focus = GER_wunderwaffe
		}
		
		cost = 200
		ai_will_do = {
			factor = 5 
		}
		fire_only_once = yes
		
		days_remove = 120
		modifier = {
			civilian_factory_use = 120
		}
		remove_effect = {
			add_tech_bonus = {
				name = GER_concentration_of_nuclear_research
				ahead_reduction = 3
				uses = 1
				technology = nukes
			}
		}
	}
	
	GER_remove_ship_limit = {
	
		icon = generic_construction
		
		allowed = {
			original_tag = GER
		}
		
		visible = {
			has_idea = GER_ship_limit
			has_completed_focus = GER_naval_rearmament
		}
		
		available = {
			num_of_naval_factories > 50
			num_of_civilian_factories_available_for_projects > 79
		}
		
		fire_only_once = yes
		ai_will_do = {
			factor = 0
		}
		
		cost = 0
		
		days_remove = 90
		
		modifier = {
			civilian_factory_use = 80
			industrial_capacity_dockyard = -0.2
		}
		
		remove_effect = {
			remove_ideas = {
				GER_ship_limit
			}
		}
		
	}
	
	
	GER_dismantle_maginot = {

		icon = generic_construction

		available = {
			#has_war = yes
			controls_state = 28
			if = {
				limit = {
					FRA = { has_completed_focus = FRA_extend_the_maginot_line }
				}
				controls_state = 18
				controls_state = 29
			}
		}

		cost = 50
		fire_only_once = yes

		ai_will_do = {
			factor = 0
		}
		visible = {
			#has_war = yes
			controls_state = 28
			if = {
				limit = {
					FRA = { has_completed_focus = FRA_extend_the_maginot_line }
				}
				controls_state = 18
				controls_state = 29
			}
		}
		days_remove = 180
		modifier = {
			civilian_factory_use = 20
		}
		remove_effect = {
			28 = {
				set_building_level = {
					type = bunker
					level = 2
					province = {
						all_provinces = yes
						limit_to_border = no
						level > 2
					}
				}
			}
			if = {
				limit = {
					FRA = { has_completed_focus = FRA_extend_the_maginot_line }
				}
				18 = {
					set_building_level = {
						type = bunker
						level = 2
						province = {
							all_provinces = yes
							limit_to_border = no
							level > 2
						}
					}
				}
				29 = {
					set_building_level = {
						type = bunker
						level = 2
						province = {
							all_provinces = yes
							limit_to_border = no
							level > 2
						}
					}
				}
			}
			if = {
				limit = {
					has_idea = FRA_protected_by_the_maginot_line
				}
				remove_ideas = FRA_protected_by_the_maginot_line
			}
		}
		complete_effect = {
			if = {
				limit = { FRA = { has_completed_focus = FRA_extend_the_maginot_line } }
				add_timed_idea = { idea = GER_dismantle_maginot days = 270 }
				else = {
					add_timed_idea = { idea = GER_dismantle_maginot days = 180 }
				}
			}
		}
	}
	GER_dismantle_czechoslovakian_forts = {

		icon = generic_construction

		available = {
			#has_war = yes
			controls_state = 69 # Sudetenland
			controls_state = 74 # Eastern Sudetenland
			controls_state = 9 # Bohemia
			controls_state = 75 # Moravia
		}

		cost = 50
		fire_only_once = yes

		ai_will_do = {
			factor = 0
		}
		visible = {
			#has_war = yes
			controls_state = 69 # Sudetenland
			controls_state = 74 # Eastern Sudetenland
			controls_state = 9 # Bohemia
			controls_state = 75 # Moravia
		}
		days_remove = 180
		modifier = {
			civilian_factory_use = 12
		}
		remove_effect = {
			69 = {
				set_building_level = {
					type = bunker
					level = 1
					province = {
						all_provinces = yes
						limit_to_border = no
						level > 1
					}
				}
			}
			74 = {
				set_building_level = {
					type = bunker
					level = 1
					province = {
						all_provinces = yes
						limit_to_border = no
						level > 1
					}
				}
			}
			9 = {
				set_building_level = {
					type = bunker
					level = 1
					province = {
						all_provinces = yes
						limit_to_border = no
						level > 1
					}
				}
			}
			75 = {
				set_building_level = {
					type = bunker
					level = 1
					province = {
						all_provinces = yes
						limit_to_border = no
						level > 1
					}
				}
			}
			if = {
				limit = {
					72 = {
						controller = {
							OR = {
								tag = ROOT
								is_subject_of = ROOT
							}
						}
					}
					71 = {
						controller = {
							OR = {
								tag = ROOT
								is_subject_of = ROOT
							}
						}
					}
				}
				72 = {
					set_building_level = {
						type = bunker
						level = 1
						province = {
							all_provinces = yes
							limit_to_border = no
							level > 1
						}
					}
				}
				71 = {
					set_building_level = {
						type = bunker
						level = 1
						province = {
							all_provinces = yes
							limit_to_border = no
							level > 1
						}
					}
				}
			}
			if = {
				limit = {
					70 = {
						controller = {
							OR = {
								tag = ROOT
								is_subject_of = ROOT
							}
						}
					}
				}
				70 = {
					set_building_level = {
						type = bunker
						level = 1
						province = {
							all_provinces = yes
							limit_to_border = no
							level > 1
						}
					}
				}
			}
			if = {
				limit = {
					73 = {
						controller = {
							OR = {
								tag = ROOT
								is_subject_of = ROOT
							}
						}
					}
					664 = {
						controller = {
							OR = {
								tag = ROOT
								is_subject_of = ROOT
							}
						}
					}
				}
				73 = {
					set_building_level = {
						type = bunker
						level = 1
						province = {
							all_provinces = yes
							limit_to_border = no
							level > 1
						}
					}
				}
				664 = {
					set_building_level = {
						type = bunker
						level = 1
						province = {
							all_provinces = yes
							limit_to_border = no
							level > 1
						}
					}
				}
			}
		}
		complete_effect = {
			add_timed_idea = { idea = GER_dismantle_czechoslovakian_forts days = 180 }
		}
	}
	
	GER_build_ostwall = {
		icon = generic_construction
		
		available = {
			any_country = {
				OR = {
					tag = GER
					is_in_faction_with = GER
				}
				OR = {
					has_full_control_of_state = 191
					has_full_control_of_state = 209
					has_full_control_of_state = 210
					has_full_control_of_state = 207
					has_full_control_of_state = 206
					has_full_control_of_state = 204
					has_full_control_of_state = 194
					has_full_control_of_state = 202
					has_full_control_of_state = 203
					has_full_control_of_state = 226
					has_full_control_of_state = 200
				}
			}
		}
		
		visible = {
			has_completed_focus = GER_ostwall
		}
		
		cost = 100

		fire_only_once = yes

		ai_will_do = {
			factor = 0
		}
		
		days_remove = 45
		modifier = {
			civilian_factory_use = 100
		}
		
		remove_effect = {
			if = {
				limit = { 
					any_country = {
						OR = {
							tag = GER
							is_in_faction_with = GER
						}
						has_full_control_of_state = 191 
					}
				}
				hidden_effect = {
					191 = {
						add_building_construction = {
							type = bunker
							level = 5
							province = 4640
							instant_build = yes
						}
					}
				}
			}
			if = {
				limit = { 
					any_country = {
						OR = {
							tag = GER
							is_in_faction_with = GER
						}
						has_full_control_of_state = 209
					}
				}
				hidden_effect = {
					209 = {
						add_building_construction = {
							type = bunker
							level = 4
							province = 415
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 4
							province = 3310
							instant_build = yes
						}
					}
				}
			}
			if = {
				limit = { 
					any_country = {
						OR = {
							tag = GER
							is_in_faction_with = GER
						}
						has_full_control_of_state = 210 
					}
				}
				hidden_effect = {
					210 = {
						add_building_construction = {
							type = bunker
							level = 4
							province = 3333
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 4
							province = 11259
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 4
							province = 9386
							instant_build = yes
						}
					}
				}
			}
			if = {
				limit = { 
					any_country = {
						OR = {
							tag = GER
							is_in_faction_with = GER
						}
						has_full_control_of_state = 207 
					}
				}
				hidden_effect = {
					207 = {
						add_building_construction = {
							type = bunker
							level = 4
							province = 323
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 7
							province = 11241
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 4
							province = 11220
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 4
							province = 3331
							instant_build = yes
						}
					}
				}
			}
			if = {
				limit = { 
					any_country = {
						OR = {
							tag = GER
							is_in_faction_with = GER
						}
						has_full_control_of_state = 206 
					}
				}
				hidden_effect = {
					209 = {
						add_building_construction = {
							type = bunker
							level = 4
							province = 9289
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 4
							province = 3378
							instant_build = yes
						}
					}
				}
			}
			if = {
				limit = { 
					any_country = {
						OR = {
							tag = GER
							is_in_faction_with = GER
						}
						has_full_control_of_state = 204 
					}
				}
				hidden_effect = {
					204 = {
						add_building_construction = {
							type = bunker
							level = 4
							province = 6373
							instant_build = yes
						}
					}
				}
			}
			if = {
				limit = { 
					any_country = {
						OR = {
							tag = GER
							is_in_faction_with = GER
						}
						has_full_control_of_state = 194 
					}
				}
				hidden_effect = {
					194 = {
						add_building_construction = {
							type = bunker
							level = 4
							province = 6319
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 4
							province = 9249
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 4
							province = 3507
							instant_build = yes
						}
					}
				}
			}
			if = {
				limit = { 
					any_country = {
						OR = {
							tag = GER
							is_in_faction_with = GER
						}
						has_full_control_of_state = 202 
					}
				}
				hidden_effect = {
					202 = {
						add_building_construction = {
							type = bunker
							level = 4
							province = 9568
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 4
							province = 3543
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 8
							province = 525
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 4
							province = 3494
							instant_build = yes
						}
					}
				}
			}
			if = {
				limit = { 
					any_country = {
						OR = {
							tag = GER
							is_in_faction_with = GER
						}
						has_full_control_of_state = 203 
					}
				}
				hidden_effect = {
					203 = {
						add_building_construction = {
							type = bunker
							level = 4
							province = 11454
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 4
							province = 488
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 4
							province = 3468
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 4
							province = 6478
							instant_build = yes
						}
					}
				}
			}
			if = {
				limit = { 
					any_country = {
						OR = {
							tag = GER
							is_in_faction_with = GER
						}
						has_full_control_of_state = 226 
					}
				}
				hidden_effect = {
					226 = {
						add_building_construction = {
							type = bunker
							level = 4
							province = 9433
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 7
							province = 11437
							instant_build = yes
						}
					}
				}
			}
			if = {
				limit = { 
					any_country = {
						OR = {
							tag = GER
							is_in_faction_with = GER
						}
						has_full_control_of_state = 200 
					}
				}
				hidden_effect = {
					200 = {
						add_building_construction = {
							type = bunker
							level = 5
							province = 11405
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 4
							province = 6596
							instant_build = yes
						}
						add_building_construction = {
							type = bunker
							level = 4
							province = 11700
							instant_build = yes
						}
					}
				}
			}
		}
		
	}
}

GER_aid_hun_rom_democratic_civil_war = {

	GER_aid_hun_democratic_civil_war = {

		icon = generic_prepare_civil_war

		available = {
			HUN = {
				NOT = { has_government = democratic }
				NOT = { has_war_with = GER }
				has_civil_war = yes
				exists = yes
				any_enemy_country = {
					original_tag = HUN
					has_government = democratic
				}
			}
		}

		cost = 0

		ai_will_do = {
			factor = 200
		}

		#Available if democratic civil war
		visible = {
			has_completed_focus = GER_align_hungary
			GER = { has_government = democratic }
		}

		complete_effect = {
			if = {
				limit = {
					HUN = { is_in_faction_with = GER }
				}
				remove_from_faction = HUN
				random_country = {
					limit = {
						original_tag = HUN
						has_government = democratic
						has_war_with = HUN
					}
					GER = { add_to_faction = PREV }
				}
			}
			random_country = {
				limit = {
					original_tag = HUN
					has_government = democratic
					has_war_with = HUN
				}
				GER = { add_to_war = { targeted_alliance = PREV enemy = HUN hostility_reason = asked_to_join } }
			}
		}
	}

	GER_aid_rom_democratic_civil_war = {

		icon = generic_prepare_civil_war

		available = {
			ROM = {
				NOT = { has_government = democratic }
				NOT = { has_war_with = GER }
				has_civil_war = yes
				exists = yes
				any_enemy_country = {
					original_tag = ROM
					has_government = democratic
				}
			}
		}

		cost = 0

		ai_will_do = {
			factor = 200
		}

		#Available if democratic civil war
		visible = {
			has_completed_focus = GER_align_romania
			GER = { has_government = democratic }
		}

		complete_effect = {
			if = {
				limit = {
					ROM = { is_in_faction_with = GER }
				}
				remove_from_faction = ROM
				random_country = {
					limit = {
						original_tag = ROM
						has_government = democratic
						has_war_with = ROM
					}
					GER = { add_to_faction = PREV }
				}
			}
			random_country = {
				limit = {
					original_tag = ROM
					has_government = democratic
					has_war_with = ROM
				}
				GER = { add_to_war = { targeted_alliance = PREV enemy = ROM hostility_reason = asked_to_join } }
			}
		}
	}

}

GER_austro_hungarian_empire = {

	GER_reform_austro_hungarian_empire = {

		allowed = {
			OR = {
				original_tag = AUS
				original_tag = HUN
				original_tag = CZE
			}
		}

		available = {
			AUS = {
				OR = {
					has_government = neutrality
					neutrality > 0.4
				}
			}
			HUN = {
				OR = {
					has_government = neutrality
					neutrality > 0.4
				}
			}
			CZE = {
				OR = {
					has_government = neutrality
					neutrality > 0.4
				}
			}
		}

		visible = {
			GER = {
				has_completed_focus = GER_rekindle_imperial_sentiment
				has_government = neutrality
			}
			AUS = {
				exists = yes
			}
			HUN = {
				exists = yes
			}
			CZE = {
				exists = yes
			}
			NOT = { has_global_flag = GER_reformed_austro_hungarian_empire }
		}

		cost = 0
		fire_only_once = yes

		ai_will_do = {
			factor = 200
			modifier = {
				factor = 0
				tag = HUN
			}
			modifier = {
				factor = 0
				tag = CZE
			}
		}

		complete_effect = {
			custom_effect_tooltip = GER_reform_austro_hungarian_empire_tt
			hidden_effect = { set_global_flag = GER_reformed_austro_hungarian_empire }
			if = {
				limit = {
					tag = AUS
				}
				HUN = { country_event = { id = wtt_germany.68 hours = 1 } }
				CZE = { country_event = { id = wtt_germany.68 hours = 3 } }
			}
			if = {
				limit = {
					tag = HUN
				}
				AUS = { country_event = { id = wtt_germany.68 hours = 1 } }
				CZE = { country_event = { id = wtt_germany.68 hours = 3 } }
			}
			if = {
				limit = {
					tag = CZE
				}
				HUN = { country_event = { id = wtt_germany.68 hours = 1 } }
				AUS = { country_event = { id = wtt_germany.68 hours = 3 } }
			}
		}
	}
}

capitulation_decisions = {
	GER_capitulate_yalta = {
		
		icon = generic_political_discourse
	
		fire_only_once = yes
		
		allowed = {
			original_tag = GER
		}
		
		visible = {
			has_global_flag = had_yalta_conference
			has_war = yes
			has_war_with = SOV 
			has_war_with = USA
		}
		
		available = {
			OR = {
				GER = {
					surrender_progress > 0.7
					NOT = {
						controls_state = 791 #Berlin
					}
				}
				GER = {
					has_capitulated = yes
				}
			}
		}
		
		ai_will_do = {
			factor = 99999
		}
		
		complete_effect = {
			country_event = {			
				days = 1
				id = hip_germany.3
			}
		}
	}
	
	GER_capitulate_soviet = {
		
		icon = generic_political_discourse
	
		fire_only_once = yes
		
		allowed = {
			original_tag = GER
		}
		
		visible = {
			NOT = {
				has_global_flag = had_yalta_conference
			}
			has_war_with = SOV
			surrender_progress > 0.7
		}
		
		available = {
			controls_state = 51 # Rhineland
			NOT = {
				controls_state = 791 #Berlin
			}
		}
		
		ai_will_do = {
			factor = 99999
		}
		
		complete_effect = {
			country_event = {			
				days = 1
				id = hip_germany.11
			}
		}
	}
	
	GER_capitulate_allies = {
		icon = generic_political_discourse
	
		fire_only_once = yes
		
		allowed = {
			original_tag = GER
		}
		
		visible = {
			has_war = yes
			has_war_with = ENG
			surrender_progress > 0.7
		}
		
		available = {
			GER = {
				surrender_progress > 0.75
				controls_state = 763 # Königsberg
				NOT = {
					controls_state = 791 #Berlin
				}
			}
			SOV = {
				NOT = {
					controls_state = 791 #Berlin
				}
			}
		}
		
		ai_will_do = {
			factor = 99999
		}
		
		complete_effect = {
			country_event = {			
				days = 1
				id = hip_germany.13
			}
		}
	}
}

GER_scandinavian_trade = {

	GER_weserubung_preparation = {
		icon = decision_generic_break_treaty
		allowed = {
			original_tag = GER
		}
		
		available = {
			ENG = {
			has_mined = {
			target = NOR
			value > 250
				}
			}
			AND = {
				hidden_trigger = {
					NOR = {
					controls_state = 144
					}
				}
			}
		}
		
		visible = {
			ENG = {
			has_mined = {
			target = NOR
			value > 1
				}
			}
			AND = {
				NOR = {
				controls_state = 144
				}
			}
		}
			
		fire_only_once = yes
	
		ai_will_do = {
			factor = 999
		}
		
		cost = 0
		
		days_remove = 28
		
		modifier = {
			political_power_cost = 1.0
			command_power_gain  = -0.15
		}
		
		remove_effect = {
			GER = {
				complete_national_focus =  GER_weserubung 
			}
		}
	}	
	

	GER_DOW_DEN = {
	
		icon = decision_generic_break_treaty
		allowed = {
			original_tag = GER
		}
		
		available = {
			has_completed_focus = GER_weserubung
			date > 1940.2.1
		}
		
		visible = {
			is_ai = yes
			NOT = { DEN = { is_in_faction_with = GER } }
			country_exists = DEN
		}
			
		fire_only_once = yes
	
		ai_will_do = {
			factor = 999
		}
		
		complete_effect = {	
			declare_war_on = { target = DEN type = annex_everything }	
		}
	}
	GER_DOW_NOR = {
	
		icon = decision_generic_break_treaty
		allowed = {
			original_tag = GER
		}
		
		available = {
			has_completed_focus = GER_weserubung
			date > 1940.2.1
			controls_state = 99
			controls_state = 37
		}
		
		visible = {
			is_ai = yes
			NOT = { NOR = { is_in_faction_with = GER } }
			country_exists = DEN
		}
			
		fire_only_once = yes
	
		ai_will_do = {
			factor = 999
		}
		
		complete_effect = {	
			declare_war_on = { target = NOR type = annex_everything }	
		}
	}
	
	GER_occupy_danemark = {
		allowed = {
			original_tag = GER
		}
		visible = {
			DEN = {
				is_subject_of = GER
			}
		}
		available = {
			date > 1943.9.1
			GER = {
				has_war_with = ENG
			}
		}
		
		fire_only_once = yes
	
		ai_will_do = {
			factor = 25
		}
		cost = 50
		
		complete_effect = {
			end_puppet = DEN
			DEN = {
				leave_faction = yes
				white_peace = ENG
				white_peace = USA
				white_peace = SOV
			}
			ENG = {
				add_to_faction = DEN
			}
			GER = {
				declare_war_on = {
					target = DEN
					type = annex_everything
				}
				set_state_controller = 37
				set_state_controller = 99
				transfer_state = 801
			}
		}
	}
	
	GER_reopen_trade_with_sweden = {
		allowed = {
			original_tag = GER
		}
		
		visible = {
			SWE = {
				has_country_flag = allied_narvik
			}
			SWE = {
				NOT = {
					has_country_flag = lulea_frozen
				}
			}
		}
		
		available = {
			any_country = {
				OR = {
					original_tag = GER 
					is_subject_of = GER
					is_in_faction_with = GER
				}
				controls_state = 144
			}
		}
		
		cost = 10
		ai_will_do = {
			factor = 100
		}
		
		complete_effect = {
			hidden_effect = {
				SWE = {
					clr_country_flag = allied_narvik
					add_opinion_modifier = {
						target = GER 
						modifier = Reichmark_block
					}
					add_opinion_modifier = {
						target = GER 
						modifier = Reichmark_block_rel
					}
				}
			}
			
			SWE = {
				remove_opinion_modifier = {
					target = GER
					modifier = cw_embargo
				}
			}
		}
	}
	
	GER_carve_Sweden = {
		allowed = {
			original_tag = GER
		}
		
		visible = {
			SWE = {
				NOT = {
					has_country_flag = sweden_carved
				}
			}
			GER = {
				OR = {
					has_war_with = ENG
					has_war_with = SOV
					has_war_with = USA
					has_war_with = DEN
					has_war_with = NOR
				}
			}
			
			any_country = {
				OR = {
					original_tag = GER 
					is_subject_of = GER
					is_in_faction_with = GER
				}
				controls_state = 144
			}
			any_country = {
				OR = {
					original_tag = GER 
					is_subject_of = GER
					is_in_faction_with = GER
				}
				controls_state = 37
			}
		}
		
		available = {
			any_country = {
				OR = {
					original_tag = GER 
					is_subject_of = GER
					is_in_faction_with = GER
				}
				controls_state = 144
			}
			any_country = {
				OR = {
					original_tag = GER 
					is_subject_of = GER
					is_in_faction_with = GER
				}
				controls_state = 37
			}
		}
		
		cost = 100
		ai_will_do = {
			factor = 100
		}
		
		fire_only_once = yes
		
		complete_effect = {
			IF = {
				limit = {
					ENG = {
						NOT = {
							is_in_faction_with = GER
						}
					}
				}
			
				SWE = {
					add_opinion_modifier = {
						target = ENG
						modifier = cw_embargo
					}
				}
			}
			IF = {
				limit = {
					FRA = {
						NOT = {
							is_in_faction_with = GER
						}
					}
				}
			
				SWE = {
					add_opinion_modifier = {
						target = FRA
						modifier = cw_embargo
					}
				}
			}
			IF = {
				limit = {
					CAN = {
						NOT = {
							is_in_faction_with = GER
						}
					}
				}
			
				SWE = {
					add_opinion_modifier = {
						target = CAN
						modifier = cw_embargo
					}
				}
			}
			IF = {
				limit = {
					USA = {
						NOT = {
							is_in_faction_with = GER
						}
					}
				}
			
				SWE = {
					add_opinion_modifier = {
						target = USA
						modifier = cw_embargo
					}
				}
			}
			
			SWE = {
				give_military_access = GER
				hidden_effect = {
					set_country_flag = sweden_carved
				}
			}
		}
	}
}
